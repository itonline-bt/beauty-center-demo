(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95508,e=>{"use strict";let t=(0,e.i(35320).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],95508)},34353,e=>{"use strict";let t=(0,e.i(35320).default)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);e.s(["Edit2",()=>t],34353)},27823,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},35320,e=>{"use strict";var t=e.i(29130),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=(e,a)=>{let l=(0,t.forwardRef)(({color:l="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:c,...d},m)=>(0,t.createElement)("svg",{ref:m,...s,width:r,height:r,stroke:l,strokeWidth:i?24*Number(n)/Number(r):n,className:["lucide",`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,o].join(" "),...d},[...a.map(([e,s])=>(0,t.createElement)(e,s)),...Array.isArray(c)?c:[c]]));return l.displayName=`${e}`,l};e.s(["default",()=>a],35320)},6180,e=>{"use strict";let t=(0,e.i(35320).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>t],6180)},66826,53207,e=>{"use strict";var t=e.i(35320);let s=(0,t.default)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);e.s(["Sparkles",()=>s],66826);let a=(0,t.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>a],53207)},14936,e=>{"use strict";let t=(0,e.i(35320).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],14936)},9021,e=>{"use strict";let t=(0,e.i(35320).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],9021)},21135,e=>{"use strict";let t=(0,e.i(35320).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);e.s(["Phone",()=>t],21135)},90223,e=>{"use strict";let t=(0,e.i(35320).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",()=>t],90223)},25034,e=>{"use strict";var t=e.i(46623),s=e.i(29130),a=e.i(87577),l=e.i(89896),r=e.i(93841),n=e.i(1266),i=e.i(6261),o=e.i(28205),c=e.i(95508),d=e.i(21135),m=e.i(90223),x=e.i(34353),h=e.i(9021);let u=(0,e.i(35320).default)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);var p=e.i(14936),g=e.i(6180);function j(){let e,j=(0,a.useRouter)(),{isAuthenticated:v}=(0,l.useAuthStore)(),{customers:y,appointments:f,addCustomer:N,updateCustomer:b,deleteCustomer:k}=(0,l.useDataStore)(),{locale:C,t:w}=(0,r.useI18n)(),[S,M]=(0,s.useState)(""),[_,P]=(0,s.useState)(!1),[L,A]=(0,s.useState)(!1),[T,B]=(0,s.useState)(null),[I,U]=(0,s.useState)(null),[q,H]=(0,s.useState)({name:"",phone:"",email:"",gender:"female",notes:""});if((0,s.useEffect)(()=>{v||j.push("/login")},[v,j]),!v)return null;let O=(0,s.useMemo)(()=>y.filter(e=>e.name.toLowerCase().includes(S.toLowerCase())||e.phone.includes(S)||e.email?.toLowerCase().includes(S.toLowerCase())),[y,S]),D=(0,s.useMemo)(()=>({total:y.length,totalSpent:y.reduce((e,t)=>e+t.total_spent,0),avgSpent:y.length>0?Math.round(y.reduce((e,t)=>e+t.total_spent,0)/y.length):0,vip:y.filter(e=>e.total_visits>=10).length}),[y]),E=e=>{e?(U(e),H({name:e.name,phone:e.phone,email:e.email||"",gender:e.gender,notes:e.notes||""})):(U(null),H({name:"",phone:"",email:"",gender:"female",notes:""})),P(!0)},V=()=>{P(!1),U(null),H({name:"",phone:"",email:"",gender:"female",notes:""})};return(0,t.jsx)(n.default,{children:(0,t.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,t.jsx)(i.PageHeader,{title:w("customers.title"),subtitle:"lo"===C?"ຈັດການຂໍ້ມູນລູກຄ້າ":"Manage customer information",action:(0,t.jsx)(i.Button,{icon:(0,t.jsx)(c.Plus,{className:"w-5 h-5"}),onClick:()=>E(),children:w("customers.add")})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(i.StatCard,{title:"lo"===C?"ລູກຄ້າທັງໝົດ":"Total Customers",value:D.total,icon:(0,t.jsx)(g.Users,{className:"w-6 h-6"}),color:"blue"}),(0,t.jsx)(i.StatCard,{title:"lo"===C?"ລູກຄ້າ VIP":"VIP Customers",value:D.vip,icon:(0,t.jsx)(u,{className:"w-6 h-6"}),color:"amber"}),(0,t.jsx)(i.StatCard,{title:"lo"===C?"ຍອດໃຊ້ຈ່າຍລວມ":"Total Spent",value:(0,o.formatCurrency)(D.totalSpent),icon:(0,t.jsx)(p.DollarSign,{className:"w-6 h-6"}),color:"emerald"}),(0,t.jsx)(i.StatCard,{title:"lo"===C?"ສະເລ່ຍຕໍ່ຄົນ":"Average per Customer",value:(0,o.formatCurrency)(D.avgSpent),icon:(0,t.jsx)(p.DollarSign,{className:"w-6 h-6"}),color:"purple"})]}),(0,t.jsx)(i.SearchInput,{value:S,onChange:M,placeholder:w("common.search")}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:0===O.length?(0,t.jsx)("div",{className:"col-span-full",children:(0,t.jsx)(i.Card,{children:(0,t.jsx)(i.EmptyState,{icon:(0,t.jsx)(g.Users,{className:"w-8 h-8"}),title:"lo"===C?"ບໍ່ພົບລູກຄ້າ":"No customers found",action:(0,t.jsx)(i.Button,{onClick:()=>E(),children:w("customers.add")})})})}):O.map(e=>(0,t.jsxs)(i.Card,{hover:!0,className:"cursor-pointer",onClick:()=>{B(e),A(!0)},children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-rose-400 to-pink-500 flex items-center justify-center text-white font-bold text-lg",children:e.name.charAt(0)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[e.total_visits>=10&&(0,t.jsxs)(i.Badge,{variant:"warning",children:[(0,t.jsx)(u,{className:"w-3 h-3 mr-1"}),"VIP"]}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:[e.total_visits," ","lo"===C?"ຄັ້ງ":"visits"]})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-1",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{onClick:()=>E(e),className:"p-1.5 hover:bg-gray-100 rounded-lg",children:(0,t.jsx)(x.Edit2,{className:"w-4 h-4 text-gray-500"})}),(0,t.jsx)("button",{onClick:()=>k(e.id),className:"p-1.5 hover:bg-red-50 rounded-lg",children:(0,t.jsx)(h.Trash2,{className:"w-4 h-4 text-red-500"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,t.jsx)(d.Phone,{className:"w-4 h-4 text-gray-400"}),e.phone]}),e.email&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,t.jsx)(m.Mail,{className:"w-4 h-4 text-gray-400"}),e.email]})]}),(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"lo"===C?"ຍອດໃຊ້ຈ່າຍ":"Total Spent"}),(0,t.jsx)("span",{className:"font-bold text-rose-600",children:(0,o.formatCurrency)(e.total_spent)})]})]},e.id))}),(0,t.jsx)(i.Modal,{isOpen:_,onClose:V,title:w(I?"common.edit":"customers.add"),children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),I?b(I.id,q):N(q),V()},className:"space-y-4",children:[(0,t.jsx)(i.Input,{label:w("customers.name"),value:q.name,onChange:e=>H({...q,name:e.target.value}),placeholder:"lo"===C?"ຊື່ລູກຄ້າ":"Customer name",required:!0}),(0,t.jsx)(i.Input,{label:w("customers.phone"),type:"tel",value:q.phone,onChange:e=>H({...q,phone:e.target.value}),placeholder:"020 xxxx xxxx",required:!0}),(0,t.jsx)(i.Input,{label:w("customers.email"),type:"email",value:q.email,onChange:e=>H({...q,email:e.target.value}),placeholder:"email@example.com"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"lo"===C?"ເພດ":"Gender"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",name:"gender",value:"female",checked:"female"===q.gender,onChange:e=>H({...q,gender:e.target.value}),className:"text-rose-500"}),(0,t.jsx)("span",{children:"lo"===C?"ຍິງ":"Female"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",name:"gender",value:"male",checked:"male"===q.gender,onChange:e=>H({...q,gender:e.target.value}),className:"text-rose-500"}),(0,t.jsx)("span",{children:"lo"===C?"ຊາຍ":"Male"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"lo"===C?"ໝາຍເຫດ":"Notes"}),(0,t.jsx)("textarea",{value:q.notes,onChange:e=>H({...q,notes:e.target.value}),className:"w-full px-4 py-2.5 border rounded-lg resize-none",rows:3})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)(i.Button,{type:"button",variant:"secondary",className:"flex-1",onClick:V,children:w("common.cancel")}),(0,t.jsx)(i.Button,{type:"submit",className:"flex-1",children:w("common.save")})]})]})}),(0,t.jsx)(i.Modal,{isOpen:L,onClose:()=>A(!1),title:T?.name||"",size:"lg",children:T&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-rose-400 to-pink-500 flex items-center justify-center text-white font-bold text-2xl",children:T.name.charAt(0)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:T.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,t.jsx)(d.Phone,{className:"w-4 h-4"})," ",T.phone]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"bg-rose-50 rounded-xl p-4 text-center",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-rose-600",children:T.total_visits}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"lo"===C?"ຄັ້ງ":"Visits"})]}),(0,t.jsxs)("div",{className:"bg-emerald-50 rounded-xl p-4 text-center",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:(0,o.formatCurrency)(T.total_spent)}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"lo"===C?"ໃຊ້ຈ່າຍ":"Spent"})]}),(0,t.jsxs)("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:(0,o.formatCurrency)(T.total_visits>0?Math.round(T.total_spent/T.total_visits):0)}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"lo"===C?"ສະເລ່ຍ":"Avg"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"lo"===C?"ປະຫວັດນັດໝາຍ":"Appointment History"}),(0,t.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(e=T.id,f.filter(t=>t.customer_id===e).sort((e,t)=>t.appointment_date.localeCompare(e.appointment_date))).slice(0,10).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:"lo"===C?e.service_name_lo:e.service_name}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[e.appointment_date," • ",e.appointment_time.substring(0,5)]})]}),(0,t.jsx)(i.Badge,{variant:"completed"===e.status?"success":"cancelled"===e.status?"danger":"info",children:(0,o.formatCurrency)(e.total_price)})]},e.id))})]})]})})]})})}e.s(["default",()=>j],25034)}]);