(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,90223,e=>{"use strict";let a=(0,e.i(35320).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",()=>a],90223)},21135,e=>{"use strict";let a=(0,e.i(35320).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);e.s(["Phone",()=>a],21135)},9021,e=>{"use strict";let a=(0,e.i(35320).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>a],9021)},27823,(e,a,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},35320,e=>{"use strict";var a=e.i(29130),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(e,s)=>{let t=(0,a.forwardRef)(({color:t="currentColor",size:i=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:c="",children:o,...d},u)=>(0,a.createElement)("svg",{ref:u,...l,width:i,height:i,stroke:t,strokeWidth:n?24*Number(r)/Number(i):r,className:["lucide",`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,c].join(" "),...d},[...s.map(([e,l])=>(0,a.createElement)(e,l)),...Array.isArray(o)?o:[o]]));return t.displayName=`${e}`,t};e.s(["default",()=>s],35320)},6180,e=>{"use strict";let a=(0,e.i(35320).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>a],6180)},66826,53207,e=>{"use strict";var a=e.i(35320);let l=(0,a.default)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);e.s(["Sparkles",()=>l],66826);let s=(0,a.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>s],53207)},95508,e=>{"use strict";let a=(0,e.i(35320).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],95508)},34353,e=>{"use strict";let a=(0,e.i(35320).default)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);e.s(["Edit2",()=>a],34353)},78506,e=>{"use strict";let a=(0,e.i(35320).default)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);e.s(["Shield",()=>a],78506)},43889,e=>{"use strict";var a=e.i(46623),l=e.i(29130),s=e.i(87577),t=e.i(89896),i=e.i(93841),r=e.i(1266),n=e.i(6261),c=e.i(95508),o=e.i(6180),d=e.i(34353),u=e.i(9021),h=e.i(78506),m=e.i(35320);let f=(0,m.default)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),x=(0,m.default)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var v=e.i(90223),g=e.i(21135);function p(){let e=(0,s.useRouter)(),{user:m,isAuthenticated:p}=(0,t.useAuthStore)(),{users:y,addUser:j,updateUser:k,deleteUser:N}=(0,t.useDataStore)(),{locale:b,t:w}=(0,i.useI18n)(),[_,C]=(0,l.useState)(""),[M,S]=(0,l.useState)(""),[A,L]=(0,l.useState)(!1),[P,U]=(0,l.useState)(null),[B,E]=(0,l.useState)({email:"",full_name:"",full_name_lo:"",phone:"",role:"staff",is_active:!0});if((0,l.useEffect)(()=>{p?m?.role==="staff"&&e.push("/dashboard"):e.push("/login")},[p,m,e]),!p||m?.role==="staff")return null;let I=(0,l.useMemo)(()=>y.filter(e=>{let a=e.full_name.toLowerCase().includes(_.toLowerCase())||e.email.toLowerCase().includes(_.toLowerCase()),l=!M||e.role===M;return a&&l}),[y,_,M]),T=(0,l.useMemo)(()=>({total:y.length,active:y.filter(e=>e.is_active).length,admin:y.filter(e=>"admin"===e.role).length,staff:y.filter(e=>"staff"===e.role).length}),[y]),$=e=>{e?(U(e),E({email:e.email,full_name:e.full_name,full_name_lo:e.full_name_lo||"",phone:e.phone,role:e.role,is_active:e.is_active})):(U(null),E({email:"",full_name:"",full_name_lo:"",phone:"",role:"staff",is_active:!0})),L(!0)},q=()=>{L(!1),U(null)};return(0,a.jsx)(r.default,{children:(0,a.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,a.jsx)(n.PageHeader,{title:w("users.title"),subtitle:"lo"===b?"ຈັດການບັນຊີຜູ້ໃຊ້ງານ":"Manage user accounts",action:(0,a.jsx)(n.Button,{icon:(0,a.jsx)(c.Plus,{className:"w-5 h-5"}),onClick:()=>$(),children:w("users.add")})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(n.StatCard,{title:"lo"===b?"ຜູ້ໃຊ້ທັງໝົດ":"Total Users",value:T.total,icon:(0,a.jsx)(o.Users,{className:"w-6 h-6"}),color:"blue"}),(0,a.jsx)(n.StatCard,{title:"lo"===b?"ເປີດໃຊ້ງານ":"Active",value:T.active,icon:(0,a.jsx)(f,{className:"w-6 h-6"}),color:"emerald"}),(0,a.jsx)(n.StatCard,{title:"lo"===b?"ແອດມິນ":"Admins",value:T.admin,icon:(0,a.jsx)(h.Shield,{className:"w-6 h-6"}),color:"rose"}),(0,a.jsx)(n.StatCard,{title:"lo"===b?"ພະນັກງານ":"Staff",value:T.staff,icon:(0,a.jsx)(o.Users,{className:"w-6 h-6"}),color:"purple"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(n.SearchInput,{value:_,onChange:C,placeholder:w("common.search")})}),(0,a.jsxs)("select",{value:M,onChange:e=>S(e.target.value),className:"px-4 py-2.5 border rounded-lg bg-white",children:[(0,a.jsx)("option",{value:"",children:"lo"===b?"ທຸກບົດບາດ":"All Roles"}),(0,a.jsx)("option",{value:"admin",children:"lo"===b?"ແອດມິນ":"Admin"}),(0,a.jsx)("option",{value:"manager",children:"lo"===b?"ຜູ້ຈັດການ":"Manager"}),(0,a.jsx)("option",{value:"staff",children:"lo"===b?"ພະນັກງານ":"Staff"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:0===I.length?(0,a.jsx)("div",{className:"col-span-full",children:(0,a.jsx)(n.Card,{children:(0,a.jsx)(n.EmptyState,{icon:(0,a.jsx)(o.Users,{className:"w-8 h-8"}),title:"lo"===b?"ບໍ່ພົບຜູ້ໃຊ້":"No users found"})})}):I.map(e=>{var l;return(0,a.jsxs)(n.Card,{hover:!0,className:`${!e.is_active?"opacity-60":""}`,children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-white font-bold ${"admin"===e.role?"bg-gradient-to-br from-rose-500 to-red-600":"manager"===e.role?"bg-gradient-to-br from-blue-500 to-indigo-600":"bg-gradient-to-br from-gray-400 to-gray-500"}`,children:e.full_name.charAt(0)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:e.full_name}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(l=e.role,(0,a.jsx)(n.Badge,{variant:{admin:"danger",manager:"info",staff:"default"}[l]||"default",children:{admin:"lo"===b?"ແອດມິນ":"Admin",manager:"lo"===b?"ຜູ້ຈັດການ":"Manager",staff:"lo"===b?"ພະນັກງານ":"Staff"}[l]})),!e.is_active&&(0,a.jsxs)(n.Badge,{variant:"danger",children:[(0,a.jsx)(x,{className:"w-3 h-3 mr-1"}),"lo"===b?"ປິດ":"Inactive"]})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("button",{onClick:()=>$(e),className:"p-1.5 hover:bg-gray-100 rounded-lg",children:(0,a.jsx)(d.Edit2,{className:"w-4 h-4 text-gray-500"})}),e.id!==m?.id&&(0,a.jsx)("button",{onClick:()=>N(e.id),className:"p-1.5 hover:bg-red-50 rounded-lg",children:(0,a.jsx)(u.Trash2,{className:"w-4 h-4 text-red-500"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,a.jsx)(v.Mail,{className:"w-4 h-4 text-gray-400"}),e.email]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,a.jsx)(g.Phone,{className:"w-4 h-4 text-gray-400"}),e.phone]})]})]},e.id)})}),(0,a.jsx)(n.Modal,{isOpen:A,onClose:q,title:w(P?"common.edit":"users.add"),children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),P?k(P.id,B):j(B),q()},className:"space-y-4",children:[(0,a.jsx)(n.Input,{label:"Email",type:"email",value:B.email,onChange:e=>E({...B,email:e.target.value}),required:!0}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(n.Input,{label:`${w("users.name")} (EN)`,value:B.full_name,onChange:e=>E({...B,full_name:e.target.value}),required:!0}),(0,a.jsx)(n.Input,{label:`${w("users.name")} (ລາວ)`,value:B.full_name_lo,onChange:e=>E({...B,full_name_lo:e.target.value})})]}),(0,a.jsx)(n.Input,{label:w("users.phone"),type:"tel",value:B.phone,onChange:e=>E({...B,phone:e.target.value})}),(0,a.jsx)(n.Select,{label:w("users.role"),value:B.role,onChange:e=>E({...B,role:e.target.value}),options:[{value:"staff",label:"lo"===b?"ພະນັກງານ":"Staff"},{value:"manager",label:"lo"===b?"ຜູ້ຈັດການ":"Manager"},{value:"admin",label:"lo"===b?"ແອດມິນ":"Admin"}]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"is_active",checked:B.is_active,onChange:e=>E({...B,is_active:e.target.checked}),className:"w-4 h-4 text-rose-500"}),(0,a.jsx)("label",{htmlFor:"is_active",className:"text-sm",children:"lo"===b?"ເປີດໃຊ້ງານ":"Active"})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(n.Button,{type:"button",variant:"secondary",className:"flex-1",onClick:q,children:w("common.cancel")}),(0,a.jsx)(n.Button,{type:"submit",className:"flex-1",children:w("common.save")})]})]})})]})})}e.s(["default",()=>p],43889)}]);