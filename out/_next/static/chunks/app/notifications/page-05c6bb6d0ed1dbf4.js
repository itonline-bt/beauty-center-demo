(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[193],{1800:function(e,t,s){Promise.resolve().then(s.bind(s,7129))},4314:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},9259:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6490:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8219:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},489:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},7129:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var a=s(3827),n=s(4090),l=s(7907),o=s(3036),r=s(9003),c=s(1965),i=s(5030),u=s(2169),d=s(7307),m=s(8219),p=s(4314),x=s(1524),h=s(4697),y=s(4059),f=s(3345);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let g=(0,s(7461).Z)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);var k=s(489),j=s(6490),_=s(9259),N=s(2235);function b(){let e=(0,l.useRouter)(),{user:t,isAuthenticated:s}=(0,o.t)(),{notifications:b,markNotificationRead:w,markAllNotificationsRead:v,deleteNotification:Z,clearAllNotifications:C}=(0,o.a)(),{locale:M}=(0,r.useI18n)(),[q,S]=(0,n.useState)("all");if((0,n.useEffect)(()=>{s||e.push("/login")},[s,e]),!s)return null;let D=(0,n.useMemo)(()=>{let e=[...b];switch((null==t?void 0:t.role)==="staff"&&(e=e.filter(e=>!e.for_role||"admin"!==e.for_role)),q){case"unread":return e.filter(e=>!e.is_read);case"stock":return e.filter(e=>["stock_out","low_stock","out_of_stock"].includes(e.type));case"appointment":return e.filter(e=>"appointment"===e.type);case"payment":return e.filter(e=>"payment"===e.type);default:return e}},[b,q,t]),z=b.filter(e=>!e.is_read).length,A=e=>{switch(e){case"appointment":return(0,a.jsx)(d.Z,{className:"w-5 h-5"});case"payment":return(0,a.jsx)(m.Z,{className:"w-5 h-5"});case"stock_out":return(0,a.jsx)(p.Z,{className:"w-5 h-5"});case"low_stock":return(0,a.jsx)(x.Z,{className:"w-5 h-5"});case"out_of_stock":return(0,a.jsx)(h.Z,{className:"w-5 h-5"});case"customer":return(0,a.jsx)(y.Z,{className:"w-5 h-5"});default:return(0,a.jsx)(f.Z,{className:"w-5 h-5"})}},P=e=>{switch(e){case"appointment":return"bg-blue-100 text-blue-600";case"payment":return"bg-emerald-100 text-emerald-600";case"stock_out":case"out_of_stock":return"bg-red-100 text-red-600";case"low_stock":return"bg-amber-100 text-amber-600";case"customer":return"bg-purple-100 text-purple-600";default:return"bg-gray-100 text-gray-600"}},E=e=>{var t;return(null===(t=({appointment:{en:"Appointment",lo:"ນັດໝາຍ"},payment:{en:"Payment",lo:"ການຊຳລະ"},stock_out:{en:"Stock Out",lo:"ເບີກສິນຄ້າ"},low_stock:{en:"Low Stock",lo:"ສິນຄ້າໃກ້ໝົດ"},out_of_stock:{en:"Out of Stock",lo:"ສິນຄ້າໝົດ"},customer:{en:"Customer",lo:"ລູກຄ້າ"}})[e])||void 0===t?void 0:t["lo"===M?"lo":"en"])||e},L=e=>{let t=new Date(e),s=new Date().getTime()-t.getTime(),a=Math.floor(s/6e4),n=Math.floor(s/36e5),l=Math.floor(s/864e5);return a<1?"lo"===M?"ຫາກໍ":"Just now":a<60?"lo"===M?"".concat(a," ນາທີກ່ອນ"):"".concat(a,"m ago"):n<24?"lo"===M?"".concat(n," ຊົ່ວໂມງກ່ອນ"):"".concat(n,"h ago"):l<7?"lo"===M?"".concat(l," ວັນກ່ອນ"):"".concat(l,"d ago"):t.toLocaleDateString("lo"===M?"lo-LA":"en-US",{day:"numeric",month:"short"})},O=t=>{t.is_read||w(t.id),"appointment"===t.type&&t.appointment_id?e.push("/appointments"):"payment"===t.type&&t.bill_id?e.push("/billing"):["stock_out","low_stock","out_of_stock"].includes(t.type)&&e.push("/stock")};return(0,a.jsx)(c.Z,{children:(0,a.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,a.jsx)(i.mr,{title:"lo"===M?"ແຈ້ງເຕືອນ":"Notifications",subtitle:"lo"===M?"".concat(z," ຂໍ້ຄວາມທີ່ຍັງບໍ່ໄດ້ອ່ານ"):"".concat(z," unread notifications"),action:(0,a.jsxs)("div",{className:"flex gap-2",children:[z>0&&(0,a.jsx)(i.zx,{variant:"secondary",size:"sm",icon:(0,a.jsx)(g,{className:"w-4 h-4"}),onClick:v,children:"lo"===M?"ອ່ານທັງໝົດ":"Mark all read"}),b.length>0&&(0,a.jsx)(i.zx,{variant:"danger",size:"sm",icon:(0,a.jsx)(k.Z,{className:"w-4 h-4"}),onClick:C,children:"lo"===M?"ລຶບທັງໝົດ":"Clear all"})]})}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:[{key:"all",label:"lo"===M?"ທັງໝົດ":"All",count:b.length},{key:"unread",label:"lo"===M?"ຍັງບໍ່ອ່ານ":"Unread",count:z},{key:"stock",label:"lo"===M?"ສະຕັອກ":"Stock",count:b.filter(e=>["stock_out","low_stock","out_of_stock"].includes(e.type)).length},{key:"appointment",label:"lo"===M?"ນັດໝາຍ":"Appointments",count:b.filter(e=>"appointment"===e.type).length},{key:"payment",label:"lo"===M?"ການຊຳລະ":"Payments",count:b.filter(e=>"payment"===e.type).length}].map(e=>(0,a.jsxs)("button",{onClick:()=>S(e.key),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ".concat(q===e.key?"bg-rose-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[e.label,(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs ".concat(q===e.key?"bg-white/20":"bg-gray-200"),children:(0,u.uf)(e.count)})]},e.key))}),(0,a.jsx)(i.Zb,{padding:"none",children:0===D.length?(0,a.jsx)(i.ub,{icon:(0,a.jsx)(f.Z,{className:"w-8 h-8"}),title:"lo"===M?"ບໍ່ມີແຈ້ງເຕືອນ":"No notifications",description:"lo"===M?"ແຈ້ງເຕືອນໃໝ່ຈະປາກົດຢູ່ນີ້":"New notifications will appear here"}):(0,a.jsx)("div",{className:"divide-y",children:D.map(e=>(0,a.jsxs)("div",{onClick:()=>O(e),className:"flex items-start gap-4 p-4 cursor-pointer transition-colors hover:bg-gray-50 ".concat(e.is_read?"":"bg-rose-50/50"),children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center ".concat(P(e.type)),children:A(e.type)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 ".concat(e.is_read?"":"text-rose-900"),children:"lo"===M?e.title_lo:e.title}),!e.is_read&&(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-rose-500"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:"lo"===M?e.message_lo:e.message}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[(0,a.jsx)(i.Ct,{variant:"payment"===e.type?"success":e.type.includes("stock")?"warning":"info",size:"sm",children:E(e.type)}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(j.Z,{className:"w-3 h-3"}),L(e.created_at)]}),e.user_name&&(0,a.jsxs)("span",{className:"text-gray-400",children:["lo"===M?"ໂດຍ":"by",": ",e.user_name]}),e.amount&&(0,a.jsx)("span",{className:"font-medium text-emerald-600",children:(0,u.xG)(e.amount)})]}),"stock_out"===e.type&&e.quantity&&(0,a.jsx)("div",{className:"mt-2 p-2 bg-red-50 rounded-lg text-xs",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{className:"text-red-700",children:[(0,a.jsxs)("strong",{children:["lo"===M?"ເບີກ":"Deducted",":"]})," ",(0,u.uf)(e.quantity)]}),(0,a.jsxs)("span",{className:"text-gray-600",children:[(0,u.uf)(e.previous_qty)," → ",(0,a.jsx)("strong",{children:(0,u.uf)(e.new_qty)})]}),e.reason&&(0,a.jsxs)("span",{className:"text-gray-500",children:["(",e.reason,")"]})]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[!e.is_read&&(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),w(e.id)},className:"p-2 hover:bg-gray-100 rounded-lg",title:"lo"===M?"ໝາຍວ່າອ່ານແລ້ວ":"Mark as read",children:(0,a.jsx)(_.Z,{className:"w-4 h-4 text-gray-500"})}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),Z(e.id)},className:"p-2 hover:bg-red-50 rounded-lg",title:"lo"===M?"ລຶບ":"Delete",children:(0,a.jsx)(N.Z,{className:"w-4 h-4 text-red-500"})})]})]},e.id))})})]})})}}},function(e){e.O(0,[549,576,36,619,971,69,744],function(){return e(e.s=1800)}),_N_E=e.O()}]);