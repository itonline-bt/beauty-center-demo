(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{5012:function(e,s,a){Promise.resolve().then(a.bind(a,6948))},7336:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a(7461).Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},684:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a(7461).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},5421:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a(7461).Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]])},5904:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a(7461).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},699:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a(7461).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},7326:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a(7461).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},6948:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return y}});var l=a(3827),t=a(4090),n=a(7907),r=a(3036),i=a(9003),c=a(1965),o=a(5030),d=a(5421),x=a(2235),m=a(699),u=a(7336);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,a(7461).Z)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);var f=a(1213),p=a(684),j=a(5904),g=a(7326),v=a(1061);function y(){var e,s,a;let y=(0,n.useRouter)(),{user:N,isAuthenticated:w,logout:b}=(0,r.t)(),{updateUser:Z,users:k}=(0,r.a)(),{locale:C}=(0,i.useI18n)(),[_,I]=(0,t.useState)(!1),[z,P]=(0,t.useState)(!1),[S,M]=(0,t.useState)(null),[q,A]=(0,t.useState)(!1),E=(0,t.useRef)(null),[L,R]=(0,t.useState)({full_name:"",email:"",phone:""}),[U,V]=(0,t.useState)({current:"",new_password:"",confirm:""});return((0,t.useEffect)(()=>{w||y.push("/login"),N&&(R({full_name:N.full_name||"",email:N.email||"",phone:N.phone||""}),M(N.avatar||null))},[w,N,y]),w&&N)?(0,l.jsx)(c.Z,{children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6 animate-fadeIn",children:[(0,l.jsx)(o.mr,{title:"lo"===C?"ໂປຣໄຟລ໌":"My Profile",subtitle:"lo"===C?"ຈັດການຂໍ້ມູນສ່ວນຕົວ":"Manage your personal information",action:_?(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(o.zx,{variant:"secondary",icon:(0,l.jsx)(x.Z,{className:"w-5 h-5"}),onClick:()=>{I(!1),R({full_name:N.full_name,email:N.email,phone:N.phone||""})},children:"lo"===C?"ຍົກເລີກ":"Cancel"}),(0,l.jsx)(o.zx,{variant:"success",icon:(0,l.jsx)(m.Z,{className:"w-5 h-5"}),onClick:()=>{Z(N.id,{...L,avatar:S}),I(!1),A(!0),setTimeout(()=>A(!1),3e3)},children:"lo"===C?"ບັນທຶກ":"Save"})]}):(0,l.jsx)(o.zx,{icon:(0,l.jsx)(d.Z,{className:"w-5 h-5"}),onClick:()=>I(!0),children:"lo"===C?"ແກ້ໄຂ":"Edit"})}),q&&(0,l.jsx)(o.bZ,{variant:"success",title:"lo"===C?"ບັນທຶກສຳເລັດ!":"Saved successfully!",children:void 0}),(0,l.jsxs)(o.Zb,{className:"overflow-hidden",children:[(0,l.jsx)("div",{className:"h-32 bg-gradient-to-r from-rose-500 via-pink-500 to-purple-500"}),(0,l.jsx)("div",{className:"px-6 pb-6",children:(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row items-center sm:items-end gap-4 -mt-16",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"w-32 h-32 rounded-2xl bg-white p-1 shadow-xl",children:(0,l.jsx)("div",{className:"w-full h-full rounded-xl bg-gradient-to-br from-rose-400 to-pink-500 flex items-center justify-center overflow-hidden",children:S?(0,l.jsx)("img",{src:S,alt:"Avatar",className:"w-full h-full object-cover"}):(0,l.jsx)("span",{className:"text-5xl font-bold text-white",children:(null===(e=N.full_name)||void 0===e?void 0:e.charAt(0))||"U"})})}),_&&(0,l.jsx)("button",{onClick:()=>{var e;return null===(e=E.current)||void 0===e?void 0:e.click()},className:"absolute bottom-2 right-2 p-2 bg-white rounded-full shadow-lg hover:bg-gray-50",children:(0,l.jsx)(u.Z,{className:"w-4 h-4 text-gray-600"})}),(0,l.jsx)("input",{ref:E,type:"file",accept:"image/*",className:"hidden",onChange:e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!a)return;if(a.size>1048576){alert("lo"===C?"ຮູບຕ້ອງນ້ອຍກວ່າ 1MB":"Image must be less than 1MB");return}let l=new FileReader;l.onload=e=>{var s;return M(null===(s=e.target)||void 0===s?void 0:s.result)},l.readAsDataURL(a)}})]}),(0,l.jsxs)("div",{className:"flex-1 text-center sm:text-left pt-4 sm:pt-0",children:[_?(0,l.jsx)("input",{type:"text",value:L.full_name,onChange:e=>R({...L,full_name:e.target.value}),className:"text-2xl font-bold text-gray-900 border-b-2 border-rose-500 bg-transparent outline-none w-full sm:w-auto"}):(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:N.full_name}),(0,l.jsxs)("div",{className:"flex items-center justify-center sm:justify-start gap-2 mt-2",children:[(a=N.role,(0,l.jsx)(o.Ct,{variant:{admin:"success",manager:"info",staff:"warning"}[a]||"default",children:a.toUpperCase()})),(0,l.jsx)("span",{className:"text-gray-500 text-sm",children:"•"}),(0,l.jsx)("span",{className:"text-gray-500 text-sm",children:N.email})]})]}),(0,l.jsx)("div",{className:"flex gap-2",children:(0,l.jsx)(o.zx,{variant:"secondary",size:"sm",icon:(0,l.jsx)(h,{className:"w-4 h-4"}),onClick:()=>P(!0),children:"lo"===C?"ປ່ຽນລະຫັດ":"Password"})})]})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)(o.Zb,{children:[(0,l.jsxs)("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,l.jsx)(f.Z,{className:"w-5 h-5 text-rose-500"}),"lo"===C?"ຂໍ້ມູນສ່ວນຕົວ":"Personal Information"]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm text-gray-500",children:"lo"===C?"ຊື່ເຕັມ":"Full Name"}),_?(0,l.jsx)(o.II,{value:L.full_name,onChange:e=>R({...L,full_name:e.target.value})}):(0,l.jsx)("p",{className:"font-medium text-gray-900",children:N.full_name})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm text-gray-500",children:"lo"===C?"ອີເມລ":"Email"}),_?(0,l.jsx)(o.II,{type:"email",value:L.email,onChange:e=>R({...L,email:e.target.value})}):(0,l.jsxs)("p",{className:"font-medium text-gray-900 flex items-center gap-2",children:[(0,l.jsx)(p.Z,{className:"w-4 h-4 text-gray-400"})," ",N.email]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm text-gray-500",children:"lo"===C?"ເບີໂທ":"Phone"}),_?(0,l.jsx)(o.II,{type:"tel",value:L.phone,onChange:e=>R({...L,phone:e.target.value}),placeholder:"+856 20 xxxxxxxx"}):(0,l.jsxs)("p",{className:"font-medium text-gray-900 flex items-center gap-2",children:[(0,l.jsx)(j.Z,{className:"w-4 h-4 text-gray-400"})," ",N.phone||"-"]})]})]})]}),(0,l.jsxs)(o.Zb,{children:[(0,l.jsxs)("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,l.jsx)(g.Z,{className:"w-5 h-5 text-rose-500"}),"lo"===C?"ຂໍ້ມູນບັນຊີ":"Account Information"]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm text-gray-500",children:"lo"===C?"ບົດບາດ":"Role"}),(0,l.jsxs)("p",{className:"font-medium text-gray-900 flex items-center gap-2",children:[(0,l.jsx)(g.Z,{className:"w-4 h-4 text-gray-400"})," ",null===(s=N.role)||void 0===s?void 0:s.toUpperCase()]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm text-gray-500",children:"lo"===C?"ສະຖານະ":"Status"}),(0,l.jsxs)("p",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),(0,l.jsx)("span",{className:"font-medium text-emerald-600",children:"lo"===C?"ເຄື່ອນໄຫວ":"Active"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm text-gray-500",children:"lo"===C?"ສ້າງເມື່ອ":"Created"}),(0,l.jsxs)("p",{className:"font-medium text-gray-900 flex items-center gap-2",children:[(0,l.jsx)(v.Z,{className:"w-4 h-4 text-gray-400"})," ",N.created_at||"2025-01-01"]})]})]})]})]}),z&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,l.jsxs)(o.Zb,{className:"w-full max-w-md animate-scaleIn",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,l.jsx)(h,{className:"w-5 h-5 text-rose-500"}),"lo"===C?"ປ່ຽນລະຫັດຜ່ານ":"Change Password"]}),(0,l.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),U.new_password!==U.confirm){alert("lo"===C?"ລະຫັດຜ່ານບໍ່ກົງກັນ":"Passwords do not match");return}P(!1),V({current:"",new_password:"",confirm:""}),alert("lo"===C?"ປ່ຽນລະຫັດຜ່ານສຳເລັດ":"Password changed successfully")},className:"space-y-4",children:[(0,l.jsx)(o.II,{type:"password",label:"lo"===C?"ລະຫັດປັດຈຸບັນ":"Current Password",value:U.current,onChange:e=>V({...U,current:e.target.value}),required:!0}),(0,l.jsx)(o.II,{type:"password",label:"lo"===C?"ລະຫັດໃໝ່":"New Password",value:U.new_password,onChange:e=>V({...U,new_password:e.target.value}),required:!0}),(0,l.jsx)(o.II,{type:"password",label:"lo"===C?"ຢືນຢັນລະຫັດໃໝ່":"Confirm New Password",value:U.confirm,onChange:e=>V({...U,confirm:e.target.value}),required:!0}),(0,l.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,l.jsx)(o.zx,{type:"button",variant:"secondary",className:"flex-1",onClick:()=>P(!1),children:"lo"===C?"ຍົກເລີກ":"Cancel"}),(0,l.jsx)(o.zx,{type:"submit",className:"flex-1",children:"lo"===C?"ບັນທຶກ":"Save"})]})]})]})})]})}):null}}},function(e){e.O(0,[549,576,36,619,971,69,744],function(){return e(e.s=5012)}),_N_E=e.O()}]);