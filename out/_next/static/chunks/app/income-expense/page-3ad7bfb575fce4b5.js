(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[355],{3226:function(e,t,a){Promise.resolve().then(a.bind(a,9883))},9229:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(7461).Z)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]])},3149:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(7461).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},527:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(7461).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},8219:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(7461).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},489:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(7461).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},775:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(7461).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},9733:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(7461).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},9883:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var s=a(3827),n=a(4090),l=a(7907),r=a(3036),i=a(9003),c=a(1965),o=a(5030),d=a(2169),x=a(9229),m=a(3149),h=a(527),u=a(8219),p=a(7461);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let y=(0,p.Z)("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]),g=(0,p.Z)("ArrowDownCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);var f=a(9733),b=a(775),j=a(1061),v=a(489);function N(){let e=(0,l.useRouter)(),{user:t,isAuthenticated:a}=(0,r.t)(),{transactions:p,expenseCategories:N,addTransaction:k,deleteTransaction:w,getFinancialSummary:Z}=(0,r.a)(),{locale:_}=(0,i.useI18n)(),[C,S]=(0,n.useState)(!1),[I,M]=(0,n.useState)("expense"),[D,T]=(0,n.useState)("all"),[O,z]=(0,n.useState)({start:new Date(new Date().setDate(1)).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),[E,P]=(0,n.useState)({category_id:"",description:"",amount:"",payment_method:"cash",date:new Date().toISOString().split("T")[0]});if((0,n.useEffect)(()=>{a||e.push("/login")},[a,e]),!a)return null;let A=(0,n.useMemo)(()=>Z(O.start,O.end),[O,p,Z]),q=(0,n.useMemo)(()=>{let e=p.filter(e=>e.date>=O.start&&e.date<=O.end);return"income"===D&&(e=e.filter(e=>"income"===e.type)),"expense"===D&&(e=e.filter(e=>"expense"===e.type)),e.sort((e,t)=>t.date.localeCompare(e.date)||t.id-e.id)},[p,O,D]),G=e=>{M(e),P({category_id:"",description:"",amount:"",payment_method:"cash",date:new Date().toISOString().split("T")[0]}),S(!0)},B=e=>{switch(e){case"cash":return(0,s.jsx)(x.Z,{className:"w-4 h-4"});case"transfer":return(0,s.jsx)(m.Z,{className:"w-4 h-4"});case"card":return(0,s.jsx)(h.Z,{className:"w-4 h-4"});default:return(0,s.jsx)(u.Z,{className:"w-4 h-4"})}},F=e=>{var t;return(null===(t=({cash:{en:"Cash",lo:"ເງິນສົດ"},transfer:{en:"Transfer",lo:"ໂອນ"},card:{en:"Card",lo:"ບັດ"}})[e])||void 0===t?void 0:t["lo"===_?"lo":"en"])||e},H=e=>{let t=new Date,a=new Date;a.setDate(a.getDate()-e),z({start:a.toISOString().split("T")[0],end:t.toISOString().split("T")[0]})};return(0,s.jsx)(c.Z,{children:(0,s.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,s.jsx)(o.mr,{title:"lo"===_?"ລາຍຮັບ - ລາຍຈ່າຍ":"Income & Expenses",subtitle:"lo"===_?"ບັນທຶກລາຍຮັບ ແລະ ລາຍຈ່າຍປະຈຳວັນ":"Track daily income and expenses",action:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(o.zx,{variant:"success",icon:(0,s.jsx)(y,{className:"w-5 h-5"}),onClick:()=>G("income"),children:"lo"===_?"ລາຍຮັບ":"Income"}),(0,s.jsx)(o.zx,{variant:"danger",icon:(0,s.jsx)(g,{className:"w-5 h-5"}),onClick:()=>G("expense"),children:"lo"===_?"ລາຍຈ່າຍ":"Expense"})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsx)(o.Zb,{hover:!0,className:"p-5 border-l-4 border-l-emerald-500",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"lo"===_?"ລາຍຮັບ":"Income"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-emerald-600 mt-1",children:["+",(0,d.xG)(A.totalIncome)]}),(0,s.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[(0,d.uf)(p.filter(e=>e.date>=O.start&&e.date<=O.end&&"income"===e.type).length)," ","lo"===_?"ລາຍການ":"transactions"]})]}),(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl bg-emerald-50 flex items-center justify-center",children:(0,s.jsx)(f.Z,{className:"w-6 h-6 text-emerald-600"})})]})}),(0,s.jsx)(o.Zb,{hover:!0,className:"p-5 border-l-4 border-l-red-500",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"lo"===_?"ລາຍຈ່າຍ":"Expenses"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-red-600 mt-1",children:["-",(0,d.xG)(A.totalExpenses)]}),(0,s.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[(0,d.uf)(p.filter(e=>e.date>=O.start&&e.date<=O.end&&"expense"===e.type).length)," ","lo"===_?"ລາຍການ":"transactions"]})]}),(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl bg-red-50 flex items-center justify-center",children:(0,s.jsx)(b.Z,{className:"w-6 h-6 text-red-600"})})]})}),(0,s.jsx)(o.Zb,{hover:!0,className:"p-5 border-l-4 ".concat(A.netProfit>=0?"border-l-blue-500":"border-l-orange-500"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"lo"===_?"ຍອດເຫຼືອ":"Balance"}),(0,s.jsxs)("p",{className:"text-2xl font-bold mt-1 ".concat(A.netProfit>=0?"text-blue-600":"text-orange-600"),children:[A.netProfit>=0?"+":"",(0,d.xG)(A.netProfit)]}),(0,s.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[(0,d.uf)(A.transactionCount)," ","lo"===_?"ລາຍການທັງໝົດ":"total transactions"]})]}),(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center ".concat(A.netProfit>=0?"bg-blue-50":"bg-orange-50"),children:(0,s.jsx)(u.Z,{className:"w-6 h-6 ".concat(A.netProfit>=0?"text-blue-600":"text-orange-600")})})]})})]}),(0,s.jsx)(o.Zb,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,s.jsx)(j.Z,{className:"w-5 h-5 text-gray-400"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"lo"===_?"ຊ່ວງວັນທີ:":"Date Range:"}),(0,s.jsx)("input",{type:"date",value:O.start,onChange:e=>z({...O,start:e.target.value}),className:"px-3 py-2 border rounded-lg text-sm"}),(0,s.jsx)("span",{className:"text-gray-400",children:"→"}),(0,s.jsx)("input",{type:"date",value:O.end,onChange:e=>z({...O,end:e.target.value}),className:"px-3 py-2 border rounded-lg text-sm"}),(0,s.jsxs)("div",{className:"flex gap-2 ml-auto flex-wrap",children:[(0,s.jsx)("button",{onClick:()=>H(0),className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg",children:"lo"===_?"ມື້ນີ້":"Today"}),(0,s.jsx)("button",{onClick:()=>H(7),className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg",children:"lo"===_?"7 ວັນ":"7 Days"}),(0,s.jsx)("button",{onClick:()=>{let e=new Date;z({start:new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0],end:e.toISOString().split("T")[0]})},className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg",children:"lo"===_?"ເດືອນນີ້":"This Month"}),(0,s.jsx)("button",{onClick:()=>{let e=new Date,t=new Date(e.getFullYear(),e.getMonth()-1,1),a=new Date(e.getFullYear(),e.getMonth(),0);z({start:t.toISOString().split("T")[0],end:a.toISOString().split("T")[0]})},className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg",children:"lo"===_?"ເດືອນກ່ອນ":"Last Month"})]})]})}),(0,s.jsx)("div",{className:"flex gap-2",children:[{key:"all",label:"lo"===_?"ທັງໝົດ":"All",count:q.length},{key:"income",label:"lo"===_?"ລາຍຮັບ":"Income",count:p.filter(e=>e.date>=O.start&&e.date<=O.end&&"income"===e.type).length},{key:"expense",label:"lo"===_?"ລາຍຈ່າຍ":"Expense",count:p.filter(e=>e.date>=O.start&&e.date<=O.end&&"expense"===e.type).length}].map(e=>(0,s.jsxs)("button",{onClick:()=>T(e.key),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ".concat(D===e.key?"bg-rose-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[e.label,(0,s.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs ".concat(D===e.key?"bg-white/20":"bg-gray-200"),children:(0,d.uf)(e.count)})]},e.key))}),(0,s.jsx)(o.Zb,{padding:"none",children:0===q.length?(0,s.jsx)(o.ub,{icon:(0,s.jsx)(u.Z,{className:"w-8 h-8"}),title:"lo"===_?"ບໍ່ມີລາຍການ":"No transactions",description:"lo"===_?"ເລີ່ມບັນທຶກລາຍຮັບ-ຈ່າຍເລີຍ":"Start recording income/expense"}):(0,s.jsx)("div",{className:"divide-y",children:q.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-4 p-4 hover:bg-gray-50 transition-colors ".concat("income"===e.type?"border-l-4 border-l-emerald-400":"border-l-4 border-l-red-400"),children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat("income"===e.type?"bg-emerald-100":"bg-red-100"),children:"income"===e.type?(0,s.jsx)(f.Z,{className:"w-5 h-5 text-emerald-600"}):(0,s.jsx)(b.Z,{className:"w-5 h-5 text-red-600"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-medium text-gray-900 truncate",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[(0,s.jsx)("span",{children:e.date}),(0,s.jsx)(o.Ct,{variant:"income"===e.type?"success":"danger",size:"sm",children:e.category_name}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[B(e.payment_method)," ",F(e.payment_method)]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-lg font-bold ".concat("income"===e.type?"text-emerald-600":"text-red-600"),children:["income"===e.type?"+":"-",(0,d.xG)(e.amount)]}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:e.created_by_name})]}),(0,s.jsx)("button",{onClick:()=>w(e.id),className:"p-2 hover:bg-red-50 rounded-lg",children:(0,s.jsx)(v.Z,{className:"w-4 h-4 text-red-500"})})]},e.id))})}),(0,s.jsx)(o.u_,{isOpen:C,onClose:()=>S(!1),title:"income"===I?"lo"===_?"ເພີ່ມລາຍຮັບ":"Add Income":"lo"===_?"ເພີ່ມລາຍຈ່າຍ":"Add Expense",size:"md",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault();let a=N.find(e=>e.id===Number(E.category_id));k({type:I,category_id:"expense"===I?Number(E.category_id):0,category_name:"income"===I?"lo"===_?"ລາຍຮັບອື່ນ":"Other Income":(null==a?void 0:a.name)||"Other",description:E.description,amount:Number(E.amount),payment_method:E.payment_method,date:E.date,created_by:(null==t?void 0:t.id)||1,created_by_name:(null==t?void 0:t.full_name)||"Admin"}),S(!1),P({category_id:"",description:"",amount:"",payment_method:"cash",date:new Date().toISOString().split("T")[0]})},className:"space-y-4",children:["expense"===I&&(0,s.jsx)(o.Ph,{label:"lo"===_?"ໝວດໝູ່":"Category",value:E.category_id,onChange:e=>P({...E,category_id:e.target.value}),options:N.map(e=>({value:e.id,label:"lo"===_?e.name_lo:e.name})),placeholder:"-- ".concat("lo"===_?"ເລືອກໝວດໝູ່":"Select Category"," --"),required:!0}),(0,s.jsx)(o.II,{label:"lo"===_?"ລາຍລະອຽດ":"Description",value:E.description,onChange:e=>P({...E,description:e.target.value}),required:!0,placeholder:"lo"===_?"ລາຍລະອຽດ...":"Description..."}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(o.II,{label:"lo"===_?"ຈຳນວນເງິນ":"Amount",type:"number",value:E.amount,onChange:e=>P({...E,amount:e.target.value}),required:!0,min:0}),(0,s.jsx)(o.II,{label:"lo"===_?"ວັນທີ":"Date",type:"date",value:E.date,onChange:e=>P({...E,date:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"lo"===_?"ວິທີຊຳລະ":"Payment Method"}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{value:"cash",label:"lo"===_?"ເງິນສົດ":"Cash",icon:x.Z},{value:"transfer",label:"lo"===_?"ໂອນ":"Transfer",icon:m.Z},{value:"card",label:"lo"===_?"ບັດ":"Card",icon:h.Z}].map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>P({...E,payment_method:e.value}),className:"p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-1 ".concat(E.payment_method===e.value?"border-rose-500 bg-rose-50":"border-gray-200 hover:border-gray-300"),children:[(0,s.jsx)(e.icon,{className:"w-5 h-5 ".concat(E.payment_method===e.value?"text-rose-600":"text-gray-400")}),(0,s.jsx)("span",{className:"text-xs font-medium ".concat(E.payment_method===e.value?"text-rose-700":"text-gray-600"),children:e.label})]},e.value))})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsx)(o.zx,{type:"button",variant:"secondary",className:"flex-1",onClick:()=>S(!1),children:"lo"===_?"ຍົກເລີກ":"Cancel"}),(0,s.jsx)(o.zx,{type:"submit",variant:"income"===I?"success":"danger",className:"flex-1",children:"lo"===_?"ບັນທຶກ":"Save"})]})]})})]})})}}},function(e){e.O(0,[549,576,36,619,971,69,744],function(){return e(e.s=3226)}),_N_E=e.O()}]);