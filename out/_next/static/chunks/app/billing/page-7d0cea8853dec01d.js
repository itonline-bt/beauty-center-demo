(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[713],{5466:function(e,s,t){Promise.resolve().then(t.bind(t,9219))},9229:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]])},3149:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},6490:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},527:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},8219:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},7841:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},94:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3915:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(7461).Z)("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]])},9219:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return v}});var a=t(3827),l=t(4090),n=t(7907),i=t(3036),c=t(9003),r=t(1965),d=t(5030),o=t(2169),x=t(9229),h=t(527),m=t(3149),u=t(8219),p=t(94),j=t(2461),y=t(6578),g=t(6490),f=t(7841),N=t(3915);function v(){let e=(0,n.useRouter)(),{user:s,isAuthenticated:t}=(0,i.t)(),{bills:v,appointments:b,customers:w,services:k,settings:_,addTransaction:Z}=(0,i.a)(),{locale:C}=(0,c.useI18n)(),[M,z]=(0,l.useState)(""),[P,S]=(0,l.useState)(""),[G,I]=(0,l.useState)(!1),[R,E]=(0,l.useState)(!1),[T,O]=(0,l.useState)(null),[q,B]=(0,l.useState)({customer_id:"",services:[],discount:"0",payment_method:"cash"});if((0,l.useEffect)(()=>{t||e.push("/login")},[t,e]),!t)return null;let D=(0,l.useMemo)(()=>v.filter(e=>{let s=e.customer_name.toLowerCase().includes(M.toLowerCase())||e.bill_number.includes(M),t=!P||e.payment_status===P;return s&&t}),[v,M,P]),H=(0,l.useMemo)(()=>({total:v.length,paid:v.filter(e=>"paid"===e.payment_status).length,pending:v.filter(e=>"pending"===e.payment_status).length,revenue:v.filter(e=>"paid"===e.payment_status).reduce((e,s)=>e+s.total_amount,0)}),[v]);b.filter(e=>"completed"===e.status);let A=e=>{O(e),I(!0)},L=e=>{switch(e){case"cash":return(0,a.jsx)(x.Z,{className:"w-4 h-4"});case"card":return(0,a.jsx)(h.Z,{className:"w-4 h-4"});case"transfer":return(0,a.jsx)(m.Z,{className:"w-4 h-4"});default:return(0,a.jsx)(u.Z,{className:"w-4 h-4"})}};return(0,a.jsx)(r.Z,{children:(0,a.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,a.jsx)(d.mr,{title:"lo"===C?"ໃບບິນ":"Billing",subtitle:"lo"===C?"ຈັດການໃບບິນ ແລະ ການຊຳລະເງິນ":"Manage invoices and payments",action:(0,a.jsx)(d.zx,{icon:(0,a.jsx)(p.Z,{className:"w-5 h-5"}),onClick:()=>E(!0),children:"lo"===C?"ສ້າງໃບບິນໃໝ່":"Create Invoice"})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(d.Rm,{title:"lo"===C?"ໃບບິນທັງໝົດ":"Total Invoices",value:H.total,icon:(0,a.jsx)(j.Z,{className:"w-6 h-6"}),color:"blue"}),(0,a.jsx)(d.Rm,{title:"lo"===C?"ຊຳລະແລ້ວ":"Paid",value:H.paid,icon:(0,a.jsx)(y.Z,{className:"w-6 h-6"}),color:"emerald"}),(0,a.jsx)(d.Rm,{title:"lo"===C?"ລໍຖ້າຊຳລະ":"Pending",value:H.pending,icon:(0,a.jsx)(g.Z,{className:"w-6 h-6"}),color:"amber"}),(0,a.jsx)(d.Rm,{title:"lo"===C?"ລາຍຮັບທັງໝົດ":"Total Revenue",value:(0,o.xG)(H.revenue),icon:(0,a.jsx)(u.Z,{className:"w-6 h-6"}),color:"rose"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(d.Mj,{value:M,onChange:z,placeholder:"lo"===C?"ຄົ້ນຫາໃບບິນ...":"Search invoices..."})}),(0,a.jsxs)("select",{value:P,onChange:e=>S(e.target.value),className:"px-4 py-2.5 border rounded-lg bg-white",children:[(0,a.jsx)("option",{value:"",children:"lo"===C?"ທຸກສະຖານະ":"All Status"}),(0,a.jsx)("option",{value:"paid",children:"lo"===C?"ຊຳລະແລ້ວ":"Paid"}),(0,a.jsx)("option",{value:"pending",children:"lo"===C?"ລໍຖ້າຊຳລະ":"Pending"})]})]}),(0,a.jsx)("div",{className:"space-y-3",children:0===D.length?(0,a.jsx)(d.Zb,{children:(0,a.jsx)(d.ub,{icon:(0,a.jsx)(j.Z,{className:"w-8 h-8"}),title:"lo"===C?"ບໍ່ພົບໃບບິນ":"No invoices found"})}):D.map(e=>(0,a.jsx)(d.Zb,{hover:!0,className:"p-0",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 p-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"font-mono text-sm text-rose-600 font-semibold",children:e.bill_number}),(0,a.jsx)(d.Ct,{variant:"paid"===e.payment_status?"success":"warning",children:"paid"===e.payment_status?"lo"===C?"ຊຳລະແລ້ວ":"Paid":"lo"===C?"ລໍຖ້າ":"Pending"})]}),(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.customer_name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.created_at})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"lo"===C?"ຍອດລວມ":"Total"}),(0,a.jsx)("p",{className:"text-xl font-bold text-gray-900",children:(0,o.xG)(e.total_amount)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[L(e.payment_method),(0,a.jsx)("span",{className:"text-sm capitalize",children:e.payment_method})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("button",{onClick:()=>A(e),className:"p-2 hover:bg-gray-100 rounded-lg",title:"lo"===C?"ເບິ່ງ":"View",children:(0,a.jsx)(f.Z,{className:"w-5 h-5 text-gray-500"})}),(0,a.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-lg",title:"lo"===C?"ພິມ":"Print",children:(0,a.jsx)(N.Z,{className:"w-5 h-5 text-gray-500"})})]})]})]})},e.id))}),(0,a.jsx)(d.u_,{isOpen:G,onClose:()=>I(!1),title:(null==T?void 0:T.bill_number)||"",size:"lg",children:T&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center border-b pb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-rose-600",children:_.shop_name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:_.address}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:_.phone})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"lo"===C?"ລູກຄ້າ":"Customer"}),(0,a.jsx)("p",{className:"font-semibold",children:T.customer_name})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"lo"===C?"ວັນທີ":"Date"}),(0,a.jsx)("p",{className:"font-semibold",children:T.created_at})]})]}),(0,a.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2 text-left text-sm",children:"lo"===C?"ລາຍການ":"Item"}),(0,a.jsx)("th",{className:"px-4 py-2 text-right text-sm",children:"lo"===C?"ຈຳນວນ":"Amount"})]})}),(0,a.jsx)("tbody",{children:(0,a.jsxs)("tr",{className:"border-t",children:[(0,a.jsx)("td",{className:"px-4 py-3",children:"lo"===C?"ບໍລິການ":"Services"}),(0,a.jsx)("td",{className:"px-4 py-3 text-right",children:(0,o.xG)(T.subtotal)})]})})]})}),(0,a.jsxs)("div",{className:"space-y-2 pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"lo"===C?"ຍອດລວມ":"Subtotal"}),(0,a.jsx)("span",{children:(0,o.xG)(T.subtotal)})]}),T.discount_amount>0&&(0,a.jsxs)("div",{className:"flex justify-between text-sm text-red-600",children:[(0,a.jsx)("span",{children:"lo"===C?"ສ່ວນຫຼຸດ":"Discount"}),(0,a.jsxs)("span",{children:["-",(0,o.xG)(T.discount_amount)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-500",children:["lo"===C?"ອາກອນ":"Tax"," (",_.tax_rate,"%)"]}),(0,a.jsx)("span",{children:(0,o.xG)(T.tax_amount)})]}),(0,a.jsxs)("div",{className:"flex justify-between text-lg font-bold pt-2 border-t",children:[(0,a.jsx)("span",{children:"lo"===C?"ຍອດສຸດທິ":"Total"}),(0,a.jsx)("span",{className:"text-rose-600",children:(0,o.xG)(T.total_amount)})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[L(T.payment_method),(0,a.jsx)("span",{className:"capitalize",children:T.payment_method})]}),(0,a.jsx)(d.Ct,{variant:"paid"===T.payment_status?"success":"warning",size:"md",children:"paid"===T.payment_status?"lo"===C?"ຊຳລະແລ້ວ":"Paid":"lo"===C?"ລໍຖ້າ":"Pending"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(d.zx,{variant:"secondary",className:"flex-1",onClick:()=>I(!1),children:"lo"===C?"ປິດ":"Close"}),(0,a.jsx)(d.zx,{className:"flex-1",icon:(0,a.jsx)(N.Z,{className:"w-5 h-5"}),children:"lo"===C?"ພິມ":"Print"})]})]})}),(0,a.jsx)(d.u_,{isOpen:R,onClose:()=>E(!1),title:"lo"===C?"ສ້າງໃບບິນໃໝ່":"Create New Invoice",size:"lg",children:(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(j.Z,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,a.jsx)("p",{children:"lo"===C?"ກຳລັງພັດທະນາ...":"Coming soon..."}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"lo"===C?"ໃຊ້ຂໍ້ມູນຈາກນັດໝາຍທີ່ສຳເລັດແລ້ວ":"Use completed appointments to create bills"})]})})]})})}}},function(e){e.O(0,[549,576,36,619,971,69,744],function(){return e(e.s=5466)}),_N_E=e.O()}]);