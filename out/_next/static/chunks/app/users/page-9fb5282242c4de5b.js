(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[240],{4785:function(e,l,a){Promise.resolve().then(a.bind(a,6437))},684:function(e,l,a){"use strict";a.d(l,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(7461).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},5421:function(e,l,a){"use strict";a.d(l,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(7461).Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]])},5904:function(e,l,a){"use strict";a.d(l,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(7461).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},94:function(e,l,a){"use strict";a.d(l,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(7461).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7326:function(e,l,a){"use strict";a.d(l,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(7461).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},489:function(e,l,a){"use strict";a.d(l,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(7461).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},6437:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return y}});var s=a(3827),t=a(4090),n=a(7907),i=a(3036),r=a(9003),c=a(1965),o=a(5030),d=a(94),u=a(4059),m=a(7461);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,m.Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);var f=a(7326);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,m.Z)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var v=a(5421),g=a(489),j=a(684),p=a(5904);function y(){let e=(0,n.useRouter)(),{user:l,isAuthenticated:a}=(0,i.t)(),{users:m,addUser:y,updateUser:N,deleteUser:b}=(0,i.a)(),{locale:_,t:k}=(0,r.useI18n)(),[w,Z]=(0,t.useState)(""),[C,M]=(0,t.useState)(""),[I,S]=(0,t.useState)(!1),[A,L]=(0,t.useState)(null),[q,z]=(0,t.useState)({email:"",full_name:"",full_name_lo:"",phone:"",role:"staff",is_active:!0});if((0,t.useEffect)(()=>{a?(null==l?void 0:l.role)==="staff"&&e.push("/dashboard"):e.push("/login")},[a,l,e]),!a||(null==l?void 0:l.role)==="staff")return null;let E=(0,t.useMemo)(()=>m.filter(e=>{let l=e.full_name.toLowerCase().includes(w.toLowerCase())||e.email.toLowerCase().includes(w.toLowerCase()),a=!C||e.role===C;return l&&a}),[m,w,C]),R=(0,t.useMemo)(()=>({total:m.length,active:m.filter(e=>e.is_active).length,admin:m.filter(e=>"admin"===e.role).length,staff:m.filter(e=>"staff"===e.role).length}),[m]),P=e=>{e?(L(e),z({email:e.email,full_name:e.full_name,full_name_lo:e.full_name_lo||"",phone:e.phone,role:e.role,is_active:e.is_active})):(L(null),z({email:"",full_name:"",full_name_lo:"",phone:"",role:"staff",is_active:!0})),S(!0)},H=()=>{S(!1),L(null)},O=e=>(0,s.jsx)(o.Ct,{variant:{admin:"danger",manager:"info",staff:"default"}[e]||"default",children:{admin:"lo"===_?"ແອດມິນ":"Admin",manager:"lo"===_?"ຜູ້ຈັດການ":"Manager",staff:"lo"===_?"ພະນັກງານ":"Staff"}[e]});return(0,s.jsx)(c.Z,{children:(0,s.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,s.jsx)(o.mr,{title:k("users.title"),subtitle:"lo"===_?"ຈັດການບັນຊີຜູ້ໃຊ້ງານ":"Manage user accounts",action:(0,s.jsx)(o.zx,{icon:(0,s.jsx)(d.Z,{className:"w-5 h-5"}),onClick:()=>P(),children:k("users.add")})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsx)(o.Rm,{title:"lo"===_?"ຜູ້ໃຊ້ທັງໝົດ":"Total Users",value:R.total,icon:(0,s.jsx)(u.Z,{className:"w-6 h-6"}),color:"blue"}),(0,s.jsx)(o.Rm,{title:"lo"===_?"ເປີດໃຊ້ງານ":"Active",value:R.active,icon:(0,s.jsx)(h,{className:"w-6 h-6"}),color:"emerald"}),(0,s.jsx)(o.Rm,{title:"lo"===_?"ແອດມິນ":"Admins",value:R.admin,icon:(0,s.jsx)(f.Z,{className:"w-6 h-6"}),color:"rose"}),(0,s.jsx)(o.Rm,{title:"lo"===_?"ພະນັກງານ":"Staff",value:R.staff,icon:(0,s.jsx)(u.Z,{className:"w-6 h-6"}),color:"purple"})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(o.Mj,{value:w,onChange:Z,placeholder:k("common.search")})}),(0,s.jsxs)("select",{value:C,onChange:e=>M(e.target.value),className:"px-4 py-2.5 border rounded-lg bg-white",children:[(0,s.jsx)("option",{value:"",children:"lo"===_?"ທຸກບົດບາດ":"All Roles"}),(0,s.jsx)("option",{value:"admin",children:"lo"===_?"ແອດມິນ":"Admin"}),(0,s.jsx)("option",{value:"manager",children:"lo"===_?"ຜູ້ຈັດການ":"Manager"}),(0,s.jsx)("option",{value:"staff",children:"lo"===_?"ພະນັກງານ":"Staff"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:0===E.length?(0,s.jsx)("div",{className:"col-span-full",children:(0,s.jsx)(o.Zb,{children:(0,s.jsx)(o.ub,{icon:(0,s.jsx)(u.Z,{className:"w-8 h-8"}),title:"lo"===_?"ບໍ່ພົບຜູ້ໃຊ້":"No users found"})})}):E.map(e=>(0,s.jsxs)(o.Zb,{hover:!0,className:"".concat(e.is_active?"":"opacity-60"),children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold ".concat("admin"===e.role?"bg-gradient-to-br from-rose-500 to-red-600":"manager"===e.role?"bg-gradient-to-br from-blue-500 to-indigo-600":"bg-gradient-to-br from-gray-400 to-gray-500"),children:e.full_name.charAt(0)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:e.full_name}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[O(e.role),!e.is_active&&(0,s.jsxs)(o.Ct,{variant:"danger",children:[(0,s.jsx)(x,{className:"w-3 h-3 mr-1"}),"lo"===_?"ປິດ":"Inactive"]})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("button",{onClick:()=>P(e),className:"p-1.5 hover:bg-gray-100 rounded-lg",children:(0,s.jsx)(v.Z,{className:"w-4 h-4 text-gray-500"})}),e.id!==(null==l?void 0:l.id)&&(0,s.jsx)("button",{onClick:()=>b(e.id),className:"p-1.5 hover:bg-red-50 rounded-lg",children:(0,s.jsx)(g.Z,{className:"w-4 h-4 text-red-500"})})]})]}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,s.jsx)(j.Z,{className:"w-4 h-4 text-gray-400"}),e.email]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4 text-gray-400"}),e.phone]})]})]},e.id))}),(0,s.jsx)(o.u_,{isOpen:I,onClose:H,title:k(A?"common.edit":"users.add"),children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),A?N(A.id,q):y(q),H()},className:"space-y-4",children:[(0,s.jsx)(o.II,{label:"Email",type:"email",value:q.email,onChange:e=>z({...q,email:e.target.value}),required:!0}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(o.II,{label:"".concat(k("users.name")," (EN)"),value:q.full_name,onChange:e=>z({...q,full_name:e.target.value}),required:!0}),(0,s.jsx)(o.II,{label:"".concat(k("users.name")," (ລາວ)"),value:q.full_name_lo,onChange:e=>z({...q,full_name_lo:e.target.value})})]}),(0,s.jsx)(o.II,{label:k("users.phone"),type:"tel",value:q.phone,onChange:e=>z({...q,phone:e.target.value})}),(0,s.jsx)(o.Ph,{label:k("users.role"),value:q.role,onChange:e=>z({...q,role:e.target.value}),options:[{value:"staff",label:"lo"===_?"ພະນັກງານ":"Staff"},{value:"manager",label:"lo"===_?"ຜູ້ຈັດການ":"Manager"},{value:"admin",label:"lo"===_?"ແອດມິນ":"Admin"}]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"is_active",checked:q.is_active,onChange:e=>z({...q,is_active:e.target.checked}),className:"w-4 h-4 text-rose-500"}),(0,s.jsx)("label",{htmlFor:"is_active",className:"text-sm",children:"lo"===_?"ເປີດໃຊ້ງານ":"Active"})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsx)(o.zx,{type:"button",variant:"secondary",className:"flex-1",onClick:H,children:k("common.cancel")}),(0,s.jsx)(o.zx,{type:"submit",className:"flex-1",children:k("common.save")})]})]})})]})})}}},function(e){e.O(0,[549,576,36,619,971,69,744],function(){return e(e.s=4785)}),_N_E=e.O()}]);