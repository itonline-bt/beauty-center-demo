(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95508,e=>{"use strict";let t=(0,e.i(35320).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],95508)},34353,e=>{"use strict";let t=(0,e.i(35320).default)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);e.s(["Edit2",()=>t],34353)},27823,(e,t,l)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),Object.defineProperty(l,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},35320,e=>{"use strict";var t=e.i(29130),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=(e,a)=>{let r=(0,t.forwardRef)(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:o="",children:c,...u},d)=>(0,t.createElement)("svg",{ref:d,...l,width:s,height:s,stroke:r,strokeWidth:n?24*Number(i)/Number(s):i,className:["lucide",`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,o].join(" "),...u},[...a.map(([e,l])=>(0,t.createElement)(e,l)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};e.s(["default",()=>a],35320)},6180,e=>{"use strict";let t=(0,e.i(35320).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>t],6180)},66826,53207,e=>{"use strict";var t=e.i(35320);let l=(0,t.default)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);e.s(["Sparkles",()=>l],66826);let a=(0,t.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>a],53207)},14936,e=>{"use strict";let t=(0,e.i(35320).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],14936)},9021,e=>{"use strict";let t=(0,e.i(35320).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],9021)},31983,e=>{"use strict";let t=(0,e.i(35320).default)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);e.s(["Camera",()=>t],31983)},62820,e=>{"use strict";let t=(0,e.i(35320).default)("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);e.s(["BarChart2",()=>t],62820)},51918,e=>{"use strict";var t=e.i(46623),l=e.i(29130),a=e.i(87577),r=e.i(89896),s=e.i(93841),i=e.i(1266),n=e.i(6261),o=e.i(28205),c=e.i(95508),u=e.i(26541),d=e.i(34353),m=e.i(9021),g=e.i(32366),p=e.i(14936),x=e.i(62820);let h=(0,e.i(35320).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var y=e.i(1547),v=e.i(31983);function j(){let e=(0,a.useRouter)(),{isAuthenticated:j}=(0,r.useAuthStore)(),{inventory:b,inventoryCategories:k,addInventoryItem:f,updateInventoryItem:N,deleteInventoryItem:_,updateInventoryImage:C}=(0,r.useDataStore)(),{locale:w,t:S}=(0,s.useI18n)(),[q,M]=(0,l.useState)(""),[P,I]=(0,l.useState)(""),[L,B]=(0,l.useState)(""),[U,A]=(0,l.useState)(!1),[$,H]=(0,l.useState)(null),[T,E]=(0,l.useState)(null),[R,z]=(0,l.useState)(!1),O=(0,l.useRef)(null),[D,G]=(0,l.useState)({name:"",name_lo:"",category_id:"",sku:"",quantity:"",min_quantity:"",cost_price:"",sell_price:"",unit:"piece",supplier:"",location:"",image_url:""});if((0,l.useEffect)(()=>{j||e.push("/login")},[j,e]),!j)return null;let V=(0,l.useMemo)(()=>b.filter(e=>{let t=e.name.toLowerCase().includes(q.toLowerCase())||e.sku&&e.sku.toLowerCase().includes(q.toLowerCase()),l=!P||e.category_id===Number(P),a=!L||"low"===L&&e.quantity<=e.min_quantity||"ok"===L&&e.quantity>e.min_quantity;return t&&l&&a}),[b,q,P,L]),F=(0,l.useMemo)(()=>{let e=b.filter(e=>e.quantity<=e.min_quantity),t=b.reduce((e,t)=>e+t.quantity*t.cost_price,0),l=b.reduce((e,t)=>e+t.quantity*t.sell_price,0);return{total:b.length,lowStock:e.length,totalValue:t,potentialProfit:l-t}},[b]),K=[{value:"piece",label:"lo"===w?"ອັນ":"Piece"},{value:"bottle",label:"lo"===w?"ຂວດ":"Bottle"},{value:"box",label:"lo"===w?"ກ່ອງ":"Box"},{value:"pack",label:"lo"===w?"ແພັກ":"Pack"},{value:"set",label:"lo"===w?"ຊຸດ":"Set"},{value:"jar",label:"lo"===w?"ກະປ໋ອງ":"Jar"}],W=e=>{e?(H(e),E(e.image_url||null),G({name:e.name,name_lo:e.name_lo||"",category_id:String(e.category_id||""),sku:e.sku||"",quantity:String(e.quantity),min_quantity:String(e.min_quantity),cost_price:String(e.cost_price),sell_price:String(e.sell_price),unit:e.unit||"piece",supplier:e.supplier||"",location:e.location||"",image_url:e.image_url||""})):(H(null),E(null),G({name:"",name_lo:"",category_id:"",sku:"",quantity:"0",min_quantity:"5",cost_price:"",sell_price:"",unit:"piece",supplier:"",location:"",image_url:""})),A(!0)},J=()=>{A(!1),H(null),E(null),O.current&&(O.current.value="")};return(0,t.jsx)(i.default,{children:(0,t.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,t.jsx)(n.PageHeader,{title:S("inventory.title"),subtitle:"lo"===w?"ຈັດການສິນຄ້າຄົງຄັງ":"Manage inventory items",action:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.Button,{variant:"secondary",onClick:()=>e.push("/stock"),children:"lo"===w?"ຕັດສະຕັອກ":"Adjust Stock"}),(0,t.jsx)(n.Button,{icon:(0,t.jsx)(c.Plus,{className:"w-5 h-5"}),onClick:()=>W(),children:S("inventory.add")})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(n.StatCard,{title:"lo"===w?"ສິນຄ້າທັງໝົດ":"Total Items",value:(0,o.formatNumber)(F.total),icon:(0,t.jsx)(u.Package,{className:"w-6 h-6"}),color:"blue"}),(0,t.jsx)(n.StatCard,{title:"lo"===w?"ສິນຄ້າໃກ້ໝົດ":"Low Stock",value:(0,o.formatNumber)(F.lowStock),icon:(0,t.jsx)(g.AlertTriangle,{className:"w-6 h-6"}),color:F.lowStock>0?"amber":"emerald"}),(0,t.jsx)(n.StatCard,{title:"lo"===w?"ມູນຄ່າສະຕັອກ":"Stock Value",value:(0,o.formatCurrency)(F.totalValue),icon:(0,t.jsx)(p.DollarSign,{className:"w-6 h-6"}),color:"purple"}),(0,t.jsx)(n.StatCard,{title:"lo"===w?"ກຳໄລທີ່ຄາດ":"Potential Profit",value:(0,o.formatCurrency)(F.potentialProfit),icon:(0,t.jsx)(x.BarChart2,{className:"w-6 h-6"}),color:"emerald"})]}),F.lowStock>0&&(0,t.jsx)(n.Alert,{variant:"warning",title:"lo"===w?"ສິນຄ້າໃກ້ໝົດ!":"Low Stock Alert!",children:"lo"===w?`ມີ ${F.lowStock} ລາຍການທີ່ຕ້ອງສັ່ງເພີ່ມ`:`${F.lowStock} items need restocking`}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(n.SearchInput,{value:q,onChange:M,placeholder:S("common.search")})}),(0,t.jsxs)("select",{value:P,onChange:e=>I(e.target.value),className:"px-4 py-2.5 border rounded-lg bg-white",children:[(0,t.jsxs)("option",{value:"",children:[S("common.all")," ","lo"===w?"ໝວດໝູ່":"Categories"]}),k.map(e=>(0,t.jsx)("option",{value:e.id,children:"lo"===w?e.name_lo:e.name},e.id))]}),(0,t.jsxs)("select",{value:L,onChange:e=>B(e.target.value),className:"px-4 py-2.5 border rounded-lg bg-white",children:[(0,t.jsxs)("option",{value:"",children:[S("common.all")," ","lo"===w?"ສະຖານະ":"Status"]}),(0,t.jsx)("option",{value:"low",children:"lo"===w?"ໃກ້ໝົດ":"Low Stock"}),(0,t.jsx)("option",{value:"ok",children:"lo"===w?"ພຽງພໍ":"In Stock"})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:0===V.length?(0,t.jsx)("div",{className:"col-span-full",children:(0,t.jsx)(n.Card,{className:"py-12 text-center text-gray-500",children:"lo"===w?"ບໍ່ພົບຂໍ້ມູນ":"No items found"})}):V.map(e=>{let l=0===e.quantity?{label:"lo"===w?"ໝົດສະຕັອກ":"Out of Stock",color:"bg-red-100 text-red-700"}:e.quantity<=e.min_quantity?{label:"lo"===w?"ໃກ້ໝົດ":"Low Stock",color:"bg-amber-100 text-amber-700"}:{label:"lo"===w?"ພຽງພໍ":"In Stock",color:"bg-emerald-100 text-emerald-700"};return(0,t.jsxs)(n.Card,{hover:!0,className:"p-0 overflow-hidden",children:[(0,t.jsxs)("div",{className:"relative aspect-square bg-gray-100",children:[(0,t.jsx)("img",{src:e.image_url&&e.image_url.startsWith("data:")||e.image_url?e.image_url:(0,o.getProductImageUrl)(e.name,e.category),alt:e.name,className:"w-full h-full object-cover",onError:t=>{t.target.src=(0,o.getProductImageUrl)(e.name,e.category)}}),(0,t.jsx)("span",{className:`absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-medium ${l.color}`,children:l.label})]}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 truncate",children:"lo"===w?e.name_lo:e.name}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 font-mono",children:["SKU: ",e.sku]}),(0,t.jsx)("div",{className:"flex items-center gap-2 mt-2",children:(0,t.jsx)("span",{className:"text-xs px-2 py-1 bg-gray-100 rounded-full text-gray-600",children:e.category})}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-3 border-t",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-bold text-rose-600",children:(0,o.formatCurrency)(e.sell_price)}),(0,t.jsxs)("p",{className:`text-sm ${e.quantity<=e.min_quantity?"text-red-600 font-medium":"text-gray-500"}`,children:[(0,o.formatNumber)(e.quantity)," ",K.find(t=>t.value===e.unit)?.label||e.unit]})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("button",{onClick:()=>W(e),className:"p-2 rounded-lg hover:bg-gray-100",children:(0,t.jsx)(d.Edit2,{className:"w-4 h-4 text-gray-500"})}),(0,t.jsx)("button",{onClick:()=>_(e.id),className:"p-2 rounded-lg hover:bg-red-50",children:(0,t.jsx)(m.Trash2,{className:"w-4 h-4 text-red-500"})})]})]})]})]},e.id)})}),(0,t.jsx)(n.Modal,{isOpen:U,onClose:J,title:S($?"common.edit":"inventory.add"),size:"lg",children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=k.find(e=>e.id===Number(D.category_id)),l={name:D.name,name_lo:D.name_lo,category_id:Number(D.category_id),category:t?.name||"",sku:D.sku,quantity:Number(D.quantity),min_quantity:Number(D.min_quantity),cost_price:Number(D.cost_price),sell_price:Number(D.sell_price),unit:D.unit,supplier:D.supplier,location:D.location,image_url:D.image_url||null};$?N($.id,l):f(l),J()},className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"lo"===w?"ຮູບພາບສິນຄ້າ":"Product Image"}),(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"relative w-32 h-32 rounded-xl bg-gray-100 flex items-center justify-center overflow-hidden border-2 border-dashed border-gray-300 hover:border-rose-400 transition-colors cursor-pointer",onClick:()=>O.current?.click(),children:R?(0,t.jsx)("div",{className:"animate-pulse text-gray-400",children:(0,t.jsx)(h,{className:"w-8 h-8 animate-bounce"})}):T?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:T,alt:"Preview",className:"w-full h-full object-cover"}),(0,t.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),E(null),G(e=>({...e,image_url:""})),O.current&&(O.current.value="")},className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:(0,t.jsx)(y.X,{className:"w-4 h-4"})})]}):(0,t.jsxs)("div",{className:"text-center p-2",children:[(0,t.jsx)(v.Camera,{className:"w-8 h-8 text-gray-400 mx-auto"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"lo"===w?"ຄລິກເພື່ອອັບໂຫຼດ":"Click to upload"})]})}),(0,t.jsx)("input",{ref:O,type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(!t)return;if(!t.type.startsWith("image/"))return void alert("lo"===w?"ກະລຸນາເລືອກໄຟລ໌ຮູບພາບ":"Please select an image file");if(t.size>2097152)return void alert("lo"===w?"ຮູບພາບຕ້ອງມີຂະໜາດບໍ່ເກີນ 2MB":"Image must be less than 2MB");z(!0);let l=new FileReader;l.onload=e=>{let t=e.target?.result;E(t),G(e=>({...e,image_url:t})),z(!1)},l.onerror=()=>{alert("lo"===w?"ເກີດຂໍ້ຜິດພາດ":"Error reading file"),z(!1)},l.readAsDataURL(t)},className:"hidden"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"lo"===w?"ອັບໂຫຼດຮູບສິນຄ້າ (PNG, JPG, GIF)":"Upload product image (PNG, JPG, GIF)"}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"lo"===w?"ຂະໜາດສູງສຸດ 2MB":"Max size 2MB"}),!T&&(0,t.jsx)(n.Button,{type:"button",variant:"secondary",size:"sm",className:"mt-2",icon:(0,t.jsx)(h,{className:"w-4 h-4"}),onClick:()=>O.current?.click(),children:"lo"===w?"ເລືອກຮູບ":"Choose Image"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(n.Input,{label:`${S("inventory.name")} (EN)`,value:D.name,onChange:e=>G({...D,name:e.target.value}),required:!0}),(0,t.jsx)(n.Input,{label:`${S("inventory.name")} (ລາວ)`,value:D.name_lo,onChange:e=>G({...D,name_lo:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(n.Select,{label:"lo"===w?"ໝວດໝູ່":"Category",value:D.category_id,onChange:e=>G({...D,category_id:e.target.value}),options:k.map(e=>({value:e.id,label:"lo"===w?e.name_lo:e.name})),placeholder:"--",required:!0}),(0,t.jsx)(n.Input,{label:"SKU",value:D.sku,onChange:e=>G({...D,sku:e.target.value}),placeholder:"HAIR-001",required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsx)(n.Input,{label:"lo"===w?"ຈຳນວນ":"Quantity",type:"number",value:D.quantity,onChange:e=>G({...D,quantity:e.target.value}),required:!0}),(0,t.jsx)(n.Select,{label:"lo"===w?"ຫົວໜ່ວຍ":"Unit",value:D.unit,onChange:e=>G({...D,unit:e.target.value}),options:K}),(0,t.jsx)(n.Input,{label:"lo"===w?"ຈຳນວນຕ່ຳສຸດ":"Min Qty",type:"number",value:D.min_quantity,onChange:e=>G({...D,min_quantity:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(n.Input,{label:"lo"===w?"ລາຄາຕົ້ນທຶນ":"Cost Price",type:"number",value:D.cost_price,onChange:e=>G({...D,cost_price:e.target.value}),required:!0}),(0,t.jsx)(n.Input,{label:"lo"===w?"ລາຄາຂາຍ":"Sell Price",type:"number",value:D.sell_price,onChange:e=>G({...D,sell_price:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(n.Input,{label:"lo"===w?"ຜູ້ສະໜອງ":"Supplier",value:D.supplier,onChange:e=>G({...D,supplier:e.target.value}),placeholder:"lo"===w?"ຊື່ຜູ້ສະໜອງ...":"Supplier name..."}),(0,t.jsx)(n.Input,{label:"lo"===w?"ສະຖານທີ່ເກັບ":"Location",value:D.location,onChange:e=>G({...D,location:e.target.value}),placeholder:"lo"===w?"ຕຳແໜ່ງເກັບ...":"Storage location..."})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)(n.Button,{type:"button",variant:"secondary",className:"flex-1",onClick:J,children:S("common.cancel")}),(0,t.jsx)(n.Button,{type:"submit",className:"flex-1",children:S("common.save")})]})]})})]})})}e.s(["default",()=>j],51918)}]);