(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27823,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},35320,e=>{"use strict";var t=e.i(29130),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(e,s)=>{let r=(0,t.forwardRef)(({color:r="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:d="",children:o,...c},m)=>(0,t.createElement)("svg",{ref:m,...a,width:l,height:l,stroke:r,strokeWidth:i?24*Number(n)/Number(l):n,className:["lucide",`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,d].join(" "),...c},[...s.map(([e,a])=>(0,t.createElement)(e,a)),...Array.isArray(o)?o:[o]]));return r.displayName=`${e}`,r};e.s(["default",()=>s],35320)},6180,e=>{"use strict";let t=(0,e.i(35320).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>t],6180)},66826,53207,e=>{"use strict";var t=e.i(35320);let a=(0,t.default)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);e.s(["Sparkles",()=>a],66826);let s=(0,t.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>s],53207)},14936,e=>{"use strict";let t=(0,e.i(35320).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],14936)},9021,e=>{"use strict";let t=(0,e.i(35320).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],9021)},68171,e=>{"use strict";let t=(0,e.i(35320).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],68171)},77056,87917,e=>{"use strict";var t=e.i(35320);let a=(0,t.default)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);e.s(["Banknote",()=>a],77056);let s=(0,t.default)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);e.s(["Building",()=>s],87917)},65268,e=>{"use strict";let t=(0,e.i(35320).default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["CreditCard",()=>t],65268)},60597,e=>{"use strict";let t=(0,e.i(35320).default)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);e.s(["TrendingDown",()=>t],60597)},25484,e=>{"use strict";var t=e.i(46623),a=e.i(29130),s=e.i(87577),r=e.i(89896),l=e.i(93841),n=e.i(1266),i=e.i(6261),d=e.i(28205),o=e.i(68171),c=e.i(60597),m=e.i(14936),x=e.i(9021),h=e.i(35320);let p=(0,h.default)("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]),u=(0,h.default)("ArrowDownCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);var y=e.i(81422),g=e.i(77056),f=e.i(87917),b=e.i(65268);function j(){let e=(0,s.useRouter)(),{user:h,isAuthenticated:j}=(0,r.useAuthStore)(),{transactions:v,expenseCategories:k,addTransaction:N,deleteTransaction:w,getFinancialSummary:C}=(0,r.useDataStore)(),{locale:S}=(0,l.useI18n)(),[M,D]=(0,a.useState)(!1),[T,_]=(0,a.useState)("expense"),[I,O]=(0,a.useState)("all"),[B,$]=(0,a.useState)({start:new Date(new Date().setDate(1)).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),[A,P]=(0,a.useState)({category_id:"",description:"",amount:"",payment_method:"cash",date:new Date().toISOString().split("T")[0]});if((0,a.useEffect)(()=>{j||e.push("/login")},[j,e]),!j)return null;let U=(0,a.useMemo)(()=>C(B.start,B.end),[B,v,C]),E=(0,a.useMemo)(()=>{let e=v.filter(e=>e.date>=B.start&&e.date<=B.end);return"income"===I&&(e=e.filter(e=>"income"===e.type)),"expense"===I&&(e=e.filter(e=>"expense"===e.type)),e.sort((e,t)=>t.date.localeCompare(e.date)||t.id-e.id)},[v,B,I]),z=e=>{_(e),P({category_id:"",description:"",amount:"",payment_method:"cash",date:new Date().toISOString().split("T")[0]}),D(!0)},L=e=>{let t=new Date,a=new Date;a.setDate(a.getDate()-e),$({start:a.toISOString().split("T")[0],end:t.toISOString().split("T")[0]})};return(0,t.jsx)(n.default,{children:(0,t.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,t.jsx)(i.PageHeader,{title:"lo"===S?"ລາຍຮັບ - ລາຍຈ່າຍ":"Income & Expenses",subtitle:"lo"===S?"ບັນທຶກລາຍຮັບ ແລະ ລາຍຈ່າຍປະຈຳວັນ":"Track daily income and expenses",action:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.Button,{variant:"success",icon:(0,t.jsx)(p,{className:"w-5 h-5"}),onClick:()=>z("income"),children:"lo"===S?"ລາຍຮັບ":"Income"}),(0,t.jsx)(i.Button,{variant:"danger",icon:(0,t.jsx)(u,{className:"w-5 h-5"}),onClick:()=>z("expense"),children:"lo"===S?"ລາຍຈ່າຍ":"Expense"})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(i.Card,{hover:!0,className:"p-5 border-l-4 border-l-emerald-500",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"lo"===S?"ລາຍຮັບ":"Income"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-emerald-600 mt-1",children:["+",(0,d.formatCurrency)(U.totalIncome)]}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[(0,d.formatNumber)(v.filter(e=>e.date>=B.start&&e.date<=B.end&&"income"===e.type).length)," ","lo"===S?"ລາຍການ":"transactions"]})]}),(0,t.jsx)("div",{className:"w-12 h-12 rounded-xl bg-emerald-50 flex items-center justify-center",children:(0,t.jsx)(o.TrendingUp,{className:"w-6 h-6 text-emerald-600"})})]})}),(0,t.jsx)(i.Card,{hover:!0,className:"p-5 border-l-4 border-l-red-500",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"lo"===S?"ລາຍຈ່າຍ":"Expenses"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-red-600 mt-1",children:["-",(0,d.formatCurrency)(U.totalExpenses)]}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[(0,d.formatNumber)(v.filter(e=>e.date>=B.start&&e.date<=B.end&&"expense"===e.type).length)," ","lo"===S?"ລາຍການ":"transactions"]})]}),(0,t.jsx)("div",{className:"w-12 h-12 rounded-xl bg-red-50 flex items-center justify-center",children:(0,t.jsx)(c.TrendingDown,{className:"w-6 h-6 text-red-600"})})]})}),(0,t.jsx)(i.Card,{hover:!0,className:`p-5 border-l-4 ${U.netProfit>=0?"border-l-blue-500":"border-l-orange-500"}`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"lo"===S?"ຍອດເຫຼືອ":"Balance"}),(0,t.jsxs)("p",{className:`text-2xl font-bold mt-1 ${U.netProfit>=0?"text-blue-600":"text-orange-600"}`,children:[U.netProfit>=0?"+":"",(0,d.formatCurrency)(U.netProfit)]}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[(0,d.formatNumber)(U.transactionCount)," ","lo"===S?"ລາຍການທັງໝົດ":"total transactions"]})]}),(0,t.jsx)("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${U.netProfit>=0?"bg-blue-50":"bg-orange-50"}`,children:(0,t.jsx)(m.DollarSign,{className:`w-6 h-6 ${U.netProfit>=0?"text-blue-600":"text-orange-600"}`})})]})})]}),(0,t.jsx)(i.Card,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,t.jsx)(y.Calendar,{className:"w-5 h-5 text-gray-400"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"lo"===S?"ຊ່ວງວັນທີ:":"Date Range:"}),(0,t.jsx)("input",{type:"date",value:B.start,onChange:e=>$({...B,start:e.target.value}),className:"px-3 py-2 border rounded-lg text-sm"}),(0,t.jsx)("span",{className:"text-gray-400",children:"→"}),(0,t.jsx)("input",{type:"date",value:B.end,onChange:e=>$({...B,end:e.target.value}),className:"px-3 py-2 border rounded-lg text-sm"}),(0,t.jsxs)("div",{className:"flex gap-2 ml-auto flex-wrap",children:[(0,t.jsx)("button",{onClick:()=>L(0),className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg",children:"lo"===S?"ມື້ນີ້":"Today"}),(0,t.jsx)("button",{onClick:()=>L(7),className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg",children:"lo"===S?"7 ວັນ":"7 Days"}),(0,t.jsx)("button",{onClick:()=>{let e=new Date;$({start:new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0],end:e.toISOString().split("T")[0]})},className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg",children:"lo"===S?"ເດືອນນີ້":"This Month"}),(0,t.jsx)("button",{onClick:()=>{let e=new Date,t=new Date(e.getFullYear(),e.getMonth()-1,1),a=new Date(e.getFullYear(),e.getMonth(),0);$({start:t.toISOString().split("T")[0],end:a.toISOString().split("T")[0]})},className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg",children:"lo"===S?"ເດືອນກ່ອນ":"Last Month"})]})]})}),(0,t.jsx)("div",{className:"flex gap-2",children:[{key:"all",label:"lo"===S?"ທັງໝົດ":"All",count:E.length},{key:"income",label:"lo"===S?"ລາຍຮັບ":"Income",count:v.filter(e=>e.date>=B.start&&e.date<=B.end&&"income"===e.type).length},{key:"expense",label:"lo"===S?"ລາຍຈ່າຍ":"Expense",count:v.filter(e=>e.date>=B.start&&e.date<=B.end&&"expense"===e.type).length}].map(e=>(0,t.jsxs)("button",{onClick:()=>O(e.key),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${I===e.key?"bg-rose-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.label,(0,t.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs ${I===e.key?"bg-white/20":"bg-gray-200"}`,children:(0,d.formatNumber)(e.count)})]},e.key))}),(0,t.jsx)(i.Card,{padding:"none",children:0===E.length?(0,t.jsx)(i.EmptyState,{icon:(0,t.jsx)(m.DollarSign,{className:"w-8 h-8"}),title:"lo"===S?"ບໍ່ມີລາຍການ":"No transactions",description:"lo"===S?"ເລີ່ມບັນທຶກລາຍຮັບ-ຈ່າຍເລີຍ":"Start recording income/expense"}):(0,t.jsx)("div",{className:"divide-y",children:E.map(e=>{var a;return(0,t.jsxs)("div",{className:`flex items-center gap-4 p-4 hover:bg-gray-50 transition-colors ${"income"===e.type?"border-l-4 border-l-emerald-400":"border-l-4 border-l-red-400"}`,children:[(0,t.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${"income"===e.type?"bg-emerald-100":"bg-red-100"}`,children:"income"===e.type?(0,t.jsx)(o.TrendingUp,{className:"w-5 h-5 text-emerald-600"}):(0,t.jsx)(c.TrendingDown,{className:"w-5 h-5 text-red-600"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900 truncate",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[(0,t.jsx)("span",{children:e.date}),(0,t.jsx)(i.Badge,{variant:"income"===e.type?"success":"danger",size:"sm",children:e.category_name}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(e=>{switch(e){case"cash":return(0,t.jsx)(g.Banknote,{className:"w-4 h-4"});case"transfer":return(0,t.jsx)(f.Building,{className:"w-4 h-4"});case"card":return(0,t.jsx)(b.CreditCard,{className:"w-4 h-4"});default:return(0,t.jsx)(m.DollarSign,{className:"w-4 h-4"})}})(e.payment_method)," ",(a=e.payment_method,({cash:{en:"Cash",lo:"ເງິນສົດ"},transfer:{en:"Transfer",lo:"ໂອນ"},card:{en:"Card",lo:"ບັດ"}})[a]?.["lo"===S?"lo":"en"]||a)]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:`text-lg font-bold ${"income"===e.type?"text-emerald-600":"text-red-600"}`,children:["income"===e.type?"+":"-",(0,d.formatCurrency)(e.amount)]}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:e.created_by_name})]}),(0,t.jsx)("button",{onClick:()=>w(e.id),className:"p-2 hover:bg-red-50 rounded-lg",children:(0,t.jsx)(x.Trash2,{className:"w-4 h-4 text-red-500"})})]},e.id)})})}),(0,t.jsx)(i.Modal,{isOpen:M,onClose:()=>D(!1),title:"income"===T?"lo"===S?"ເພີ່ມລາຍຮັບ":"Add Income":"lo"===S?"ເພີ່ມລາຍຈ່າຍ":"Add Expense",size:"md",children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=k.find(e=>e.id===Number(A.category_id));N({type:T,category_id:"expense"===T?Number(A.category_id):0,category_name:"income"===T?"lo"===S?"ລາຍຮັບອື່ນ":"Other Income":t?.name||"Other",description:A.description,amount:Number(A.amount),payment_method:A.payment_method,date:A.date,created_by:h?.id||1,created_by_name:h?.full_name||"Admin"}),D(!1),P({category_id:"",description:"",amount:"",payment_method:"cash",date:new Date().toISOString().split("T")[0]})},className:"space-y-4",children:["expense"===T&&(0,t.jsx)(i.Select,{label:"lo"===S?"ໝວດໝູ່":"Category",value:A.category_id,onChange:e=>P({...A,category_id:e.target.value}),options:k.map(e=>({value:e.id,label:"lo"===S?e.name_lo:e.name})),placeholder:`-- ${"lo"===S?"ເລືອກໝວດໝູ່":"Select Category"} --`,required:!0}),(0,t.jsx)(i.Input,{label:"lo"===S?"ລາຍລະອຽດ":"Description",value:A.description,onChange:e=>P({...A,description:e.target.value}),required:!0,placeholder:"lo"===S?"ລາຍລະອຽດ...":"Description..."}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(i.Input,{label:"lo"===S?"ຈຳນວນເງິນ":"Amount",type:"number",value:A.amount,onChange:e=>P({...A,amount:e.target.value}),required:!0,min:0}),(0,t.jsx)(i.Input,{label:"lo"===S?"ວັນທີ":"Date",type:"date",value:A.date,onChange:e=>P({...A,date:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"lo"===S?"ວິທີຊຳລະ":"Payment Method"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{value:"cash",label:"lo"===S?"ເງິນສົດ":"Cash",icon:g.Banknote},{value:"transfer",label:"lo"===S?"ໂອນ":"Transfer",icon:f.Building},{value:"card",label:"lo"===S?"ບັດ":"Card",icon:b.CreditCard}].map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>P({...A,payment_method:e.value}),className:`p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-1 ${A.payment_method===e.value?"border-rose-500 bg-rose-50":"border-gray-200 hover:border-gray-300"}`,children:[(0,t.jsx)(e.icon,{className:`w-5 h-5 ${A.payment_method===e.value?"text-rose-600":"text-gray-400"}`}),(0,t.jsx)("span",{className:`text-xs font-medium ${A.payment_method===e.value?"text-rose-700":"text-gray-600"}`,children:e.label})]},e.value))})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)(i.Button,{type:"button",variant:"secondary",className:"flex-1",onClick:()=>D(!1),children:"lo"===S?"ຍົກເລີກ":"Cancel"}),(0,t.jsx)(i.Button,{type:"submit",variant:"income"===T?"success":"danger",className:"flex-1",children:"lo"===S?"ບັນທຶກ":"Save"})]})]})})]})})}e.s(["default",()=>j],25484)}]);