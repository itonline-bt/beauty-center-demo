(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95508,e=>{"use strict";let t=(0,e.i(35320).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],95508)},27823,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},35320,e=>{"use strict";var t=e.i(29130),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=(e,a)=>{let l=(0,t.forwardRef)(({color:l="currentColor",size:i=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:c="",children:d,...o},h)=>(0,t.createElement)("svg",{ref:h,...s,width:i,height:i,stroke:l,strokeWidth:n?24*Number(r)/Number(i):r,className:["lucide",`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,c].join(" "),...o},[...a.map(([e,s])=>(0,t.createElement)(e,s)),...Array.isArray(d)?d:[d]]));return l.displayName=`${e}`,l};e.s(["default",()=>a],35320)},6180,e=>{"use strict";let t=(0,e.i(35320).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>t],6180)},66826,53207,e=>{"use strict";var t=e.i(35320);let s=(0,t.default)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);e.s(["Sparkles",()=>s],66826);let a=(0,t.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>a],53207)},14936,e=>{"use strict";let t=(0,e.i(35320).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],14936)},1753,e=>{"use strict";let t=(0,e.i(35320).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],1753)},74972,e=>{"use strict";let t=(0,e.i(35320).default)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],74972)},65268,e=>{"use strict";let t=(0,e.i(35320).default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);e.s(["CreditCard",()=>t],65268)},77056,87917,e=>{"use strict";var t=e.i(35320);let s=(0,t.default)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);e.s(["Banknote",()=>s],77056);let a=(0,t.default)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);e.s(["Building",()=>a],87917)},80798,e=>{"use strict";let t=(0,e.i(35320).default)("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);e.s(["Printer",()=>t],80798)},64176,e=>{"use strict";var t=e.i(46623),s=e.i(29130),a=e.i(87577),l=e.i(89896),i=e.i(93841),r=e.i(1266),n=e.i(6261),c=e.i(28205),d=e.i(6580),o=e.i(95508),h=e.i(80798),x=e.i(74972),m=e.i(14936),u=e.i(1753),p=e.i(92323),y=e.i(65268),j=e.i(77056),g=e.i(87917);function f(){let e=(0,a.useRouter)(),{user:f,isAuthenticated:v}=(0,l.useAuthStore)(),{bills:N,appointments:k,customers:b,services:w,settings:C,addTransaction:_}=(0,l.useDataStore)(),{locale:M}=(0,i.useI18n)(),[S,P]=(0,s.useState)(""),[B,z]=(0,s.useState)(""),[L,T]=(0,s.useState)(!1),[A,R]=(0,s.useState)(!1),[D,E]=(0,s.useState)(null),[I,O]=(0,s.useState)({customer_id:"",services:[],discount:"0",payment_method:"cash"});if((0,s.useEffect)(()=>{v||e.push("/login")},[v,e]),!v)return null;let U=(0,s.useMemo)(()=>N.filter(e=>{let t=e.customer_name.toLowerCase().includes(S.toLowerCase())||e.bill_number.includes(S),s=!B||e.payment_status===B;return t&&s}),[N,S,B]),H=(0,s.useMemo)(()=>({total:N.length,paid:N.filter(e=>"paid"===e.payment_status).length,pending:N.filter(e=>"pending"===e.payment_status).length,revenue:N.filter(e=>"paid"===e.payment_status).reduce((e,t)=>e+t.total_amount,0)}),[N]);k.filter(e=>"completed"===e.status);let q=e=>{switch(e){case"cash":return(0,t.jsx)(j.Banknote,{className:"w-4 h-4"});case"card":return(0,t.jsx)(y.CreditCard,{className:"w-4 h-4"});case"transfer":return(0,t.jsx)(g.Building,{className:"w-4 h-4"});default:return(0,t.jsx)(m.DollarSign,{className:"w-4 h-4"})}};return(0,t.jsx)(r.default,{children:(0,t.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,t.jsx)(n.PageHeader,{title:"lo"===M?"ໃບບິນ":"Billing",subtitle:"lo"===M?"ຈັດການໃບບິນ ແລະ ການຊຳລະເງິນ":"Manage invoices and payments",action:(0,t.jsx)(n.Button,{icon:(0,t.jsx)(o.Plus,{className:"w-5 h-5"}),onClick:()=>R(!0),children:"lo"===M?"ສ້າງໃບບິນໃໝ່":"Create Invoice"})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(n.StatCard,{title:"lo"===M?"ໃບບິນທັງໝົດ":"Total Invoices",value:H.total,icon:(0,t.jsx)(d.Receipt,{className:"w-6 h-6"}),color:"blue"}),(0,t.jsx)(n.StatCard,{title:"lo"===M?"ຊຳລະແລ້ວ":"Paid",value:H.paid,icon:(0,t.jsx)(p.CheckCircle,{className:"w-6 h-6"}),color:"emerald"}),(0,t.jsx)(n.StatCard,{title:"lo"===M?"ລໍຖ້າຊຳລະ":"Pending",value:H.pending,icon:(0,t.jsx)(u.Clock,{className:"w-6 h-6"}),color:"amber"}),(0,t.jsx)(n.StatCard,{title:"lo"===M?"ລາຍຮັບທັງໝົດ":"Total Revenue",value:(0,c.formatCurrency)(H.revenue),icon:(0,t.jsx)(m.DollarSign,{className:"w-6 h-6"}),color:"rose"})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(n.SearchInput,{value:S,onChange:P,placeholder:"lo"===M?"ຄົ້ນຫາໃບບິນ...":"Search invoices..."})}),(0,t.jsxs)("select",{value:B,onChange:e=>z(e.target.value),className:"px-4 py-2.5 border rounded-lg bg-white",children:[(0,t.jsx)("option",{value:"",children:"lo"===M?"ທຸກສະຖານະ":"All Status"}),(0,t.jsx)("option",{value:"paid",children:"lo"===M?"ຊຳລະແລ້ວ":"Paid"}),(0,t.jsx)("option",{value:"pending",children:"lo"===M?"ລໍຖ້າຊຳລະ":"Pending"})]})]}),(0,t.jsx)("div",{className:"space-y-3",children:0===U.length?(0,t.jsx)(n.Card,{children:(0,t.jsx)(n.EmptyState,{icon:(0,t.jsx)(d.Receipt,{className:"w-8 h-8"}),title:"lo"===M?"ບໍ່ພົບໃບບິນ":"No invoices found"})}):U.map(e=>(0,t.jsx)(n.Card,{hover:!0,className:"p-0",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 p-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"font-mono text-sm text-rose-600 font-semibold",children:e.bill_number}),(0,t.jsx)(n.Badge,{variant:"paid"===e.payment_status?"success":"warning",children:"paid"===e.payment_status?"lo"===M?"ຊຳລະແລ້ວ":"Paid":"lo"===M?"ລໍຖ້າ":"Pending"})]}),(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.customer_name}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.created_at})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"lo"===M?"ຍອດລວມ":"Total"}),(0,t.jsx)("p",{className:"text-xl font-bold text-gray-900",children:(0,c.formatCurrency)(e.total_amount)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[q(e.payment_method),(0,t.jsx)("span",{className:"text-sm capitalize",children:e.payment_method})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("button",{onClick:()=>{E(e),T(!0)},className:"p-2 hover:bg-gray-100 rounded-lg",title:"lo"===M?"ເບິ່ງ":"View",children:(0,t.jsx)(x.Eye,{className:"w-5 h-5 text-gray-500"})}),(0,t.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-lg",title:"lo"===M?"ພິມ":"Print",children:(0,t.jsx)(h.Printer,{className:"w-5 h-5 text-gray-500"})})]})]})]})},e.id))}),(0,t.jsx)(n.Modal,{isOpen:L,onClose:()=>T(!1),title:D?.bill_number||"",size:"lg",children:D&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center border-b pb-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-rose-600",children:C.shop_name}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:C.address}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:C.phone})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"lo"===M?"ລູກຄ້າ":"Customer"}),(0,t.jsx)("p",{className:"font-semibold",children:D.customer_name})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"lo"===M?"ວັນທີ":"Date"}),(0,t.jsx)("p",{className:"font-semibold",children:D.created_at})]})]}),(0,t.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left text-sm",children:"lo"===M?"ລາຍການ":"Item"}),(0,t.jsx)("th",{className:"px-4 py-2 text-right text-sm",children:"lo"===M?"ຈຳນວນ":"Amount"})]})}),(0,t.jsx)("tbody",{children:(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"px-4 py-3",children:"lo"===M?"ບໍລິການ":"Services"}),(0,t.jsx)("td",{className:"px-4 py-3 text-right",children:(0,c.formatCurrency)(D.subtotal)})]})})]})}),(0,t.jsxs)("div",{className:"space-y-2 pt-4 border-t",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"lo"===M?"ຍອດລວມ":"Subtotal"}),(0,t.jsx)("span",{children:(0,c.formatCurrency)(D.subtotal)})]}),D.discount_amount>0&&(0,t.jsxs)("div",{className:"flex justify-between text-sm text-red-600",children:[(0,t.jsx)("span",{children:"lo"===M?"ສ່ວນຫຼຸດ":"Discount"}),(0,t.jsxs)("span",{children:["-",(0,c.formatCurrency)(D.discount_amount)]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsxs)("span",{className:"text-gray-500",children:["lo"===M?"ອາກອນ":"Tax"," (",C.tax_rate,"%)"]}),(0,t.jsx)("span",{children:(0,c.formatCurrency)(D.tax_amount)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-lg font-bold pt-2 border-t",children:[(0,t.jsx)("span",{children:"lo"===M?"ຍອດສຸດທິ":"Total"}),(0,t.jsx)("span",{className:"text-rose-600",children:(0,c.formatCurrency)(D.total_amount)})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[q(D.payment_method),(0,t.jsx)("span",{className:"capitalize",children:D.payment_method})]}),(0,t.jsx)(n.Badge,{variant:"paid"===D.payment_status?"success":"warning",size:"md",children:"paid"===D.payment_status?"lo"===M?"ຊຳລະແລ້ວ":"Paid":"lo"===M?"ລໍຖ້າ":"Pending"})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(n.Button,{variant:"secondary",className:"flex-1",onClick:()=>T(!1),children:"lo"===M?"ປິດ":"Close"}),(0,t.jsx)(n.Button,{className:"flex-1",icon:(0,t.jsx)(h.Printer,{className:"w-5 h-5"}),children:"lo"===M?"ພິມ":"Print"})]})]})}),(0,t.jsx)(n.Modal,{isOpen:A,onClose:()=>R(!1),title:"lo"===M?"ສ້າງໃບບິນໃໝ່":"Create New Invoice",size:"lg",children:(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(d.Receipt,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,t.jsx)("p",{children:"lo"===M?"ກຳລັງພັດທະນາ...":"Coming soon..."}),(0,t.jsx)("p",{className:"text-sm mt-2",children:"lo"===M?"ໃຊ້ຂໍ້ມູນຈາກນັດໝາຍທີ່ສຳເລັດແລ້ວ":"Use completed appointments to create bills"})]})})]})})}e.s(["default",()=>f])}]);