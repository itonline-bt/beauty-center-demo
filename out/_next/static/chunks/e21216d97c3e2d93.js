(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1753,e=>{"use strict";let t=(0,e.i(35320).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],1753)},27823,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},35320,e=>{"use strict";var t=e.i(29130),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=(e,a)=>{let l=(0,t.forwardRef)(({color:l="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:i="",children:c,...d},u)=>(0,t.createElement)("svg",{ref:u,...s,width:r,height:r,stroke:l,strokeWidth:o?24*Number(n)/Number(r):n,className:["lucide",`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,i].join(" "),...d},[...a.map(([e,s])=>(0,t.createElement)(e,s)),...Array.isArray(c)?c:[c]]));return l.displayName=`${e}`,l};e.s(["default",()=>a],35320)},6180,e=>{"use strict";let t=(0,e.i(35320).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>t],6180)},66826,53207,e=>{"use strict";var t=e.i(35320);let s=(0,t.default)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);e.s(["Sparkles",()=>s],66826);let a=(0,t.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>a],53207)},14936,e=>{"use strict";let t=(0,e.i(35320).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],14936)},9021,e=>{"use strict";let t=(0,e.i(35320).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],9021)},14034,e=>{"use strict";let t=(0,e.i(35320).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],14034)},77863,e=>{"use strict";let t=(0,e.i(35320).default)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);e.s(["ArrowDown",()=>t],77863)},45940,e=>{"use strict";var t=e.i(46623),s=e.i(29130),a=e.i(87577),l=e.i(89896),r=e.i(93841),n=e.i(1266),o=e.i(6261),i=e.i(28205),c=e.i(11591),d=e.i(81422),u=e.i(26541),m=e.i(14936),p=e.i(6180),h=e.i(9021),y=e.i(14034);let x=(0,e.i(35320).default)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);var k=e.i(32366),g=e.i(77863),f=e.i(1753),j=e.i(1547);function w(){let e=(0,a.useRouter)(),{user:w,isAuthenticated:b}=(0,l.useAuthStore)(),{notifications:N,markNotificationRead:_,markAllNotificationsRead:v,deleteNotification:C,clearAllNotifications:M}=(0,l.useDataStore)(),{locale:$}=(0,r.useI18n)(),[S,A]=(0,s.useState)("all");if((0,s.useEffect)(()=>{b||e.push("/login")},[b,e]),!b)return null;let D=(0,s.useMemo)(()=>{let e=[...N];switch(w?.role==="staff"&&(e=e.filter(e=>!e.for_role||"admin"!==e.for_role)),S){case"unread":return e.filter(e=>!e.is_read);case"stock":return e.filter(e=>["stock_out","low_stock","out_of_stock"].includes(e.type));case"appointment":return e.filter(e=>"appointment"===e.type);case"payment":return e.filter(e=>"payment"===e.type);default:return e}},[N,S,w]),L=N.filter(e=>!e.is_read).length;return(0,t.jsx)(n.default,{children:(0,t.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,t.jsx)(o.PageHeader,{title:"lo"===$?"ແຈ້ງເຕືອນ":"Notifications",subtitle:"lo"===$?`${L} ຂໍ້ຄວາມທີ່ຍັງບໍ່ໄດ້ອ່ານ`:`${L} unread notifications`,action:(0,t.jsxs)("div",{className:"flex gap-2",children:[L>0&&(0,t.jsx)(o.Button,{variant:"secondary",size:"sm",icon:(0,t.jsx)(x,{className:"w-4 h-4"}),onClick:v,children:"lo"===$?"ອ່ານທັງໝົດ":"Mark all read"}),N.length>0&&(0,t.jsx)(o.Button,{variant:"danger",size:"sm",icon:(0,t.jsx)(h.Trash2,{className:"w-4 h-4"}),onClick:M,children:"lo"===$?"ລຶບທັງໝົດ":"Clear all"})]})}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:[{key:"all",label:"lo"===$?"ທັງໝົດ":"All",count:N.length},{key:"unread",label:"lo"===$?"ຍັງບໍ່ອ່ານ":"Unread",count:L},{key:"stock",label:"lo"===$?"ສະຕັອກ":"Stock",count:N.filter(e=>["stock_out","low_stock","out_of_stock"].includes(e.type)).length},{key:"appointment",label:"lo"===$?"ນັດໝາຍ":"Appointments",count:N.filter(e=>"appointment"===e.type).length},{key:"payment",label:"lo"===$?"ການຊຳລະ":"Payments",count:N.filter(e=>"payment"===e.type).length}].map(e=>(0,t.jsxs)("button",{onClick:()=>A(e.key),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${S===e.key?"bg-rose-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.label,(0,t.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs ${S===e.key?"bg-white/20":"bg-gray-200"}`,children:(0,i.formatNumber)(e.count)})]},e.key))}),(0,t.jsx)(o.Card,{padding:"none",children:0===D.length?(0,t.jsx)(o.EmptyState,{icon:(0,t.jsx)(c.Bell,{className:"w-8 h-8"}),title:"lo"===$?"ບໍ່ມີແຈ້ງເຕືອນ":"No notifications",description:"lo"===$?"ແຈ້ງເຕືອນໃໝ່ຈະປາກົດຢູ່ນີ້":"New notifications will appear here"}):(0,t.jsx)("div",{className:"divide-y",children:D.map(s=>{var a;let l,r,n,h,x;return(0,t.jsxs)("div",{onClick:()=>{s.is_read||_(s.id),"appointment"===s.type&&s.appointment_id?e.push("/appointments"):"payment"===s.type&&s.bill_id?e.push("/billing"):["stock_out","low_stock","out_of_stock"].includes(s.type)&&e.push("/stock")},className:`flex items-start gap-4 p-4 cursor-pointer transition-colors hover:bg-gray-50 ${!s.is_read?"bg-rose-50/50":""}`,children:[(0,t.jsx)("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${(e=>{switch(e){case"appointment":return"bg-blue-100 text-blue-600";case"payment":return"bg-emerald-100 text-emerald-600";case"stock_out":case"out_of_stock":return"bg-red-100 text-red-600";case"low_stock":return"bg-amber-100 text-amber-600";case"customer":return"bg-purple-100 text-purple-600";default:return"bg-gray-100 text-gray-600"}})(s.type)}`,children:(e=>{switch(e){case"appointment":return(0,t.jsx)(d.Calendar,{className:"w-5 h-5"});case"payment":return(0,t.jsx)(m.DollarSign,{className:"w-5 h-5"});case"stock_out":return(0,t.jsx)(g.ArrowDown,{className:"w-5 h-5"});case"low_stock":return(0,t.jsx)(k.AlertTriangle,{className:"w-5 h-5"});case"out_of_stock":return(0,t.jsx)(u.Package,{className:"w-5 h-5"});case"customer":return(0,t.jsx)(p.Users,{className:"w-5 h-5"});default:return(0,t.jsx)(c.Bell,{className:"w-5 h-5"})}})(s.type)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("h3",{className:`font-semibold text-gray-900 ${!s.is_read?"text-rose-900":""}`,children:"lo"===$?s.title_lo:s.title}),!s.is_read&&(0,t.jsx)("span",{className:"w-2 h-2 rounded-full bg-rose-500"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:"lo"===$?s.message_lo:s.message}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[(0,t.jsx)(o.Badge,{variant:"payment"===s.type?"success":s.type.includes("stock")?"warning":"info",size:"sm",children:(a=s.type,({appointment:{en:"Appointment",lo:"ນັດໝາຍ"},payment:{en:"Payment",lo:"ການຊຳລະ"},stock_out:{en:"Stock Out",lo:"ເບີກສິນຄ້າ"},low_stock:{en:"Low Stock",lo:"ສິນຄ້າໃກ້ໝົດ"},out_of_stock:{en:"Out of Stock",lo:"ສິນຄ້າໝົດ"},customer:{en:"Customer",lo:"ລູກຄ້າ"}})[a]?.["lo"===$?"lo":"en"]||a)}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(f.Clock,{className:"w-3 h-3"}),(l=new Date(s.created_at),n=Math.floor((r=new Date().getTime()-l.getTime())/6e4),h=Math.floor(r/36e5),x=Math.floor(r/864e5),n<1?"lo"===$?"ຫາກໍ":"Just now":n<60?"lo"===$?`${n} ນາທີກ່ອນ`:`${n}m ago`:h<24?"lo"===$?`${h} ຊົ່ວໂມງກ່ອນ`:`${h}h ago`:x<7?"lo"===$?`${x} ວັນກ່ອນ`:`${x}d ago`:l.toLocaleDateString("lo"===$?"lo-LA":"en-US",{day:"numeric",month:"short"}))]}),s.user_name&&(0,t.jsxs)("span",{className:"text-gray-400",children:["lo"===$?"ໂດຍ":"by",": ",s.user_name]}),s.amount&&(0,t.jsx)("span",{className:"font-medium text-emerald-600",children:(0,i.formatCurrency)(s.amount)})]}),"stock_out"===s.type&&s.quantity&&(0,t.jsx)("div",{className:"mt-2 p-2 bg-red-50 rounded-lg text-xs",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("span",{className:"text-red-700",children:[(0,t.jsxs)("strong",{children:["lo"===$?"ເບີກ":"Deducted",":"]})," ",(0,i.formatNumber)(s.quantity)]}),(0,t.jsxs)("span",{className:"text-gray-600",children:[(0,i.formatNumber)(s.previous_qty)," → ",(0,t.jsx)("strong",{children:(0,i.formatNumber)(s.new_qty)})]}),s.reason&&(0,t.jsxs)("span",{className:"text-gray-500",children:["(",s.reason,")"]})]})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[!s.is_read&&(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),_(s.id)},className:"p-2 hover:bg-gray-100 rounded-lg",title:"lo"===$?"ໝາຍວ່າອ່ານແລ້ວ":"Mark as read",children:(0,t.jsx)(y.Check,{className:"w-4 h-4 text-gray-500"})}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),C(s.id)},className:"p-2 hover:bg-red-50 rounded-lg",title:"lo"===$?"ລຶບ":"Delete",children:(0,t.jsx)(j.X,{className:"w-4 h-4 text-red-500"})})]})]},s.id)})})})]})})}e.s(["default",()=>w],45940)}]);