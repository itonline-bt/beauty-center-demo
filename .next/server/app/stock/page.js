(()=>{var e={};e.id=987,e.ids=[987],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3860:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c});var a=s(482),l=s(9108),r=s(2563),n=s.n(r),o=s(8300),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);s.d(t,i);let c=["",{children:["stock",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1549)),"D:\\Download\\beauty-center-demo\\src\\app\\stock\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1403)),"D:\\Download\\beauty-center-demo\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\Download\\beauty-center-demo\\src\\app\\stock\\page.tsx"],m="/stock/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/stock/page",pathname:"/stock",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5949:(e,t,s)=>{Promise.resolve().then(s.bind(s,5462))},662:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},1838:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5462:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var a=s(5344),l=s(3729),r=s(8428),n=s(2017),o=s(726),i=s(3538),c=s(9795),d=s(1453),m=s(3037),x=s(1917),u=s(5961),p=s(9224);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,p.Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var y=s(1838);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let g=(0,p.Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),j=(0,p.Z)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);var b=s(662);function f(){let e=(0,r.useRouter)(),{user:t,isAuthenticated:s}=(0,n.t)(),{inventory:p,stockMovements:f,adjustStock:v}=(0,n.a)(),{locale:N}=(0,o.useI18n)(),[w,k]=(0,l.useState)(""),[q,_]=(0,l.useState)(!1),[S,M]=(0,l.useState)("out"),[Z,C]=(0,l.useState)(null),[P,A]=(0,l.useState)({quantity:"",reason:""});if((0,l.useEffect)(()=>{s||e.push("/login")},[s,e]),!s)return null;let D=p.filter(e=>e.quantity<=e.min_quantity),$=p.filter(e=>e.name.toLowerCase().includes(w.toLowerCase())||e.sku&&e.sku.toLowerCase().includes(w.toLowerCase())),I=(0,l.useMemo)(()=>({totalItems:p.length,lowStock:D.length,movementsToday:f.filter(e=>e.date===new Date().toISOString().split("T")[0]).length,totalValue:p.reduce((e,t)=>e+t.quantity*t.cost_price,0)}),[p,f,D]),T=(e,t)=>{C(e),M(t),A({quantity:"",reason:"out"===t?"lo"===N?"ໃຊ້ໃນການບໍລິການ":"Used for service":"lo"===N?"ຮັບສິນຄ້າເຂົ້າ":"Stock received"}),_(!0)},R="out"===S?["lo"===N?"ໃຊ້ໃນການບໍລິການ":"Used for service","lo"===N?"ເສຍຫາຍ":"Damaged","lo"===N?"ໝົດອາຍຸ":"Expired","lo"===N?"ຂາຍ":"Sold","lo"===N?"ໃຊ້ພາຍໃນ":"Internal use"]:["lo"===N?"ຮັບສິນຄ້າເຂົ້າ":"Stock received","lo"===N?"ໂອນຈາກສາຂາອື່ນ":"Transfer from branch","lo"===N?"ແກ້ໄຂສະຕັອກ":"Stock correction","lo"===N?"ຄືນສິນຄ້າ":"Return"],E=e=>e.image_url&&e.image_url.startsWith("data:")||e.image_url?e.image_url:(0,d.G)(e.name,e.category);return a.jsx(i.Z,{children:(0,a.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[a.jsx(c.mr,{title:"lo"===N?"ຈັດການສະຕັອກ":"Stock Management",subtitle:"lo"===N?"ເພີ່ມ ແລະ ຕັດສະຕັອກສິນຄ້າ":"Add and deduct inventory stock"}),a.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx(m.Z,{className:"w-5 h-5 text-amber-600 mt-0.5"}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-amber-900",children:"lo"===N?"ການແຈ້ງເຕືອນອັດຕະໂນມັດ":"Automatic Notifications"}),a.jsx("p",{className:"text-sm text-amber-700",children:"lo"===N?"ທຸກຄັ້ງທີ່ມີການເບີກສິນຄ້າ ລະບົບຈະແຈ້ງເຕືອນໄປຫາ Admin ອັດຕະໂນມັດ":"Every stock deduction will automatically notify Admin"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(c.Rm,{title:"lo"===N?"ສິນຄ້າທັງໝົດ":"Total Items",value:(0,d.uf)(I.totalItems),icon:a.jsx(x.Z,{className:"w-6 h-6"}),color:"blue"}),a.jsx(c.Rm,{title:"lo"===N?"ສິນຄ້າໃກ້ໝົດ":"Low Stock",value:(0,d.uf)(I.lowStock),icon:a.jsx(u.Z,{className:"w-6 h-6"}),color:I.lowStock>0?"amber":"emerald"}),a.jsx(c.Rm,{title:"lo"===N?"ເຄື່ອນໄຫວມື້ນີ້":"Today Movements",value:(0,d.uf)(I.movementsToday),icon:a.jsx(h,{className:"w-6 h-6"}),color:"purple"}),a.jsx(c.Rm,{title:"lo"===N?"ມູນຄ່າລວມ":"Total Value",value:(0,d.xG)(I.totalValue),icon:a.jsx(x.Z,{className:"w-6 h-6"}),color:"emerald"})]}),D.length>0&&a.jsx(c.bZ,{variant:"warning",title:"lo"===N?`ສິນຄ້າໃກ້ໝົດ: ${D.length} ລາຍການ`:`Low stock: ${D.length} items`,children:a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:D.map(e=>(0,a.jsxs)("span",{className:"px-3 py-1 bg-amber-200/50 text-amber-800 rounded-full text-sm font-medium",children:["lo"===N?e.name_lo:e.name," (",(0,d.uf)(e.quantity),")"]},e.id))})}),a.jsx(c.Mj,{value:w,onChange:k,placeholder:"lo"===N?"ຄົ້ນຫາສິນຄ້າ...":"Search items..."}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:$.map(e=>(0,a.jsxs)(c.Zb,{hover:!0,className:`p-0 overflow-hidden ${e.quantity<=e.min_quantity?"ring-2 ring-amber-300":""}`,children:[(0,a.jsxs)("div",{className:"relative h-32 bg-gray-100",children:[a.jsx("img",{src:E(e),alt:e.name,className:"w-full h-full object-cover",onError:t=>{t.target.src=(0,d.G)(e.name,e.category)}}),e.quantity<=e.min_quantity&&a.jsx("div",{className:"absolute top-2 right-2",children:a.jsx(u.Z,{className:"w-6 h-6 text-amber-500 drop-shadow-lg"})})]}),(0,a.jsxs)("div",{className:"p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:"lo"===N?e.name_lo:e.name}),a.jsx("p",{className:"text-xs text-gray-500 font-mono mb-3",children:e.sku}),a.jsx("div",{className:"flex items-center justify-center py-3 bg-gray-50 rounded-xl mb-4",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:`text-3xl font-bold ${e.quantity<=e.min_quantity?"text-amber-600":0===e.quantity?"text-red-600":"text-gray-900"}`,children:(0,d.uf)(e.quantity)}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["lo"===N?"ຄົງເຫຼືອ":"In Stock"," (Min: ",(0,d.uf)(e.min_quantity),")"]})]})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(c.zx,{variant:"success",size:"sm",className:"flex-1",onClick:()=>T(e,"in"),icon:a.jsx(y.Z,{className:"w-4 h-4"}),children:"lo"===N?"ເພີ່ມ":"Add"}),a.jsx(c.zx,{variant:"danger",size:"sm",className:"flex-1",onClick:()=>T(e,"out"),icon:a.jsx(g,{className:"w-4 h-4"}),disabled:e.quantity<=0,children:"lo"===N?"ເບີກ":"Use"})]})]})]},e.id))}),(0,a.jsxs)(c.Zb,{padding:"none",children:[(0,a.jsxs)("div",{className:"px-5 py-4 border-b flex items-center gap-2",children:[a.jsx(h,{className:"w-5 h-5 text-gray-500"}),a.jsx("h2",{className:"font-semibold text-gray-900",children:"lo"===N?"ປະຫວັດການເຄື່ອນໄຫວລ່າສຸດ":"Recent Stock Movements"})]}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-50 border-b",children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-600",children:"lo"===N?"ວັນທີ/ເວລາ":"Date/Time"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-600",children:"lo"===N?"ສິນຄ້າ":"Item"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-600",children:"lo"===N?"ປະເພດ":"Type"}),a.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-600",children:"lo"===N?"ຈຳນວນ":"Qty"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-600",children:"lo"===N?"ຄົງເຫຼືອ":"Stock"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-600",children:"lo"===N?"ເຫດຜົນ":"Reason"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-600",children:"lo"===N?"ຜູ້ເບີກ":"By"})]})}),a.jsx("tbody",{className:"divide-y",children:f.slice(0,15).map(e=>(0,a.jsxs)("tr",{className:`hover:bg-gray-50 ${"out"===e.type?"bg-red-50/30":""}`,children:[(0,a.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-500",children:[a.jsx("div",{children:e.date}),e.time&&a.jsx("div",{className:"text-xs text-gray-400",children:e.time})]}),a.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:"lo"===N?e.inventory_name_lo:e.inventory_name}),a.jsx("td",{className:"px-4 py-3",children:(0,a.jsxs)(c.Ct,{variant:"in"===e.type?"success":"danger",children:["in"===e.type?a.jsx(j,{className:"w-3 h-3 mr-1"}):a.jsx(b.Z,{className:"w-3 h-3 mr-1"}),"in"===e.type?"lo"===N?"ເຂົ້າ":"In":"lo"===N?"ອອກ":"Out"]})}),(0,a.jsxs)("td",{className:`px-4 py-3 text-center font-bold ${"in"===e.type?"text-emerald-600":"text-red-600"}`,children:["in"===e.type?"+":"-",(0,d.uf)(e.quantity)]}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-500",children:[(0,d.uf)(e.previous_qty)," → ",a.jsx("span",{className:"font-medium text-gray-900",children:(0,d.uf)(e.new_qty)})]}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:"lo"===N&&e.reason_lo?e.reason_lo:e.reason}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.created_by_name})]},e.id))})]})})]}),a.jsx(c.u_,{isOpen:q,onClose:()=>_(!1),title:"in"===S?"lo"===N?"ເພີ່ມສະຕັອກ":"Add Stock":"lo"===N?"ເບີກສະຕັອກ":"Deduct Stock",children:Z&&(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),Z&&P.quantity&&(v(Z.id,Number(P.quantity),S,P.reason,t?.full_name||"Admin"),_(!1),C(null),A({quantity:"",reason:""}))},className:"space-y-4",children:[(0,a.jsxs)("div",{className:`flex items-center gap-4 p-4 rounded-xl ${"in"===S?"bg-emerald-50":"bg-red-50"}`,children:[a.jsx("img",{src:E(Z),alt:Z.name,className:"w-16 h-16 rounded-lg object-cover",onError:e=>{e.target.src=(0,d.G)(Z.name,Z.category)}}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"lo"===N?Z.name_lo:Z.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["lo"===N?"ຄົງເຫຼືອປັດຈຸບັນ:":"Current stock:"," ",a.jsx("span",{className:"font-bold text-lg",children:(0,d.uf)(Z.quantity)})]})]})]}),"out"===S&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-amber-50 rounded-lg border border-amber-200",children:[a.jsx(m.Z,{className:"w-5 h-5 text-amber-600"}),a.jsx("p",{className:"text-sm text-amber-800",children:"lo"===N?`การเบิกนี้จะแจ้งเตือนไปหา Admin โดย ${t?.full_name||"User"}`:`This deduction will notify Admin by ${t?.full_name||"User"}`})]}),a.jsx(c.II,{label:"lo"===N?"ຈຳນວນ":"Quantity",type:"number",value:P.quantity,onChange:e=>A({...P,quantity:e.target.value}),min:1,max:"out"===S?Z.quantity:9999,required:!0}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"lo"===N?"ເຫດຜົນ":"Reason"}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:R.map(e=>a.jsx("button",{type:"button",onClick:()=>A({...P,reason:e}),className:`px-3 py-1.5 text-sm rounded-full transition-colors ${P.reason===e?"in"===S?"bg-emerald-500 text-white":"bg-red-500 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:e},e))}),a.jsx("input",{type:"text",value:P.reason,onChange:e=>A({...P,reason:e.target.value}),className:"w-full px-4 py-2.5 border rounded-lg",placeholder:"lo"===N?"ຫຼື ພິມເຫດຜົນອື່ນ...":"Or type other reason...",required:!0})]}),a.jsx("div",{className:`p-4 rounded-xl ${"in"===S?"bg-emerald-50":"bg-red-50"}`,children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"lo"===N?"ສະຕັອກໃໝ່:":"New stock:"}),a.jsx("span",{className:`text-2xl font-bold ${"in"===S?"text-emerald-600":"text-red-600"}`,children:(0,d.uf)("in"===S?Z.quantity+(Number(P.quantity)||0):Math.max(0,Z.quantity-(Number(P.quantity)||0)))})]})}),(0,a.jsxs)("div",{className:"flex gap-3 pt-2",children:[a.jsx(c.zx,{type:"button",variant:"secondary",className:"flex-1",onClick:()=>_(!1),children:"lo"===N?"ຍົກເລີກ":"Cancel"}),a.jsx(c.zx,{type:"submit",variant:"in"===S?"success":"danger",className:"flex-1",children:"lo"===N?"ຢືນຢັນ":"Confirm"})]})]})})]})})}},1549:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>r,__esModule:()=>l,default:()=>n});let a=(0,s(6843).createProxy)(String.raw`D:\Download\beauty-center-demo\src\app\stock\page.tsx`),{__esModule:l,$$typeof:r}=a,n=a.default}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[198,635,639,104,688],()=>s(3860));module.exports=a})();