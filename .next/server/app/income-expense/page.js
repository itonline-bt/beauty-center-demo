(()=>{var e={};e.id=355,e.ids=[355],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>d});var a=s(482),r=s(9108),n=s(2563),l=s.n(n),i=s(8300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["income-expense",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7273)),"D:\\Download\\beauty-center-demo\\src\\app\\income-expense\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1403)),"D:\\Download\\beauty-center-demo\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\Download\\beauty-center-demo\\src\\app\\income-expense\\page.tsx"],x="/income-expense/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/income-expense/page",pathname:"/income-expense",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7284:(e,t,s)=>{Promise.resolve().then(s.bind(s,6486))},6469:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]])},8638:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},5674:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},8411:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},8271:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},7402:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},6064:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},6486:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var a=s(5344),r=s(3729),n=s(8428),l=s(2017),i=s(726),o=s(3538),d=s(9795),c=s(1453),x=s(6469),m=s(8638),p=s(5674),h=s(8411),u=s(9224);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let y=(0,u.Z)("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]),g=(0,u.Z)("ArrowDownCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);var b=s(6064),j=s(7402),f=s(5794),v=s(8271);function N(){let e=(0,n.useRouter)(),{user:t,isAuthenticated:s}=(0,l.t)(),{transactions:u,expenseCategories:N,addTransaction:k,deleteTransaction:w,getFinancialSummary:_}=(0,l.a)(),{locale:Z}=(0,i.useI18n)(),[C,D]=(0,r.useState)(!1),[S,M]=(0,r.useState)("expense"),[I,P]=(0,r.useState)("all"),[T,q]=(0,r.useState)({start:new Date(new Date().setDate(1)).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),[O,$]=(0,r.useState)({category_id:"",description:"",amount:"",payment_method:"cash",date:new Date().toISOString().split("T")[0]});if((0,r.useEffect)(()=>{s||e.push("/login")},[s,e]),!s)return null;let A=(0,r.useMemo)(()=>_(T.start,T.end),[T,u,_]),E=(0,r.useMemo)(()=>{let e=u.filter(e=>e.date>=T.start&&e.date<=T.end);return"income"===I&&(e=e.filter(e=>"income"===e.type)),"expense"===I&&(e=e.filter(e=>"expense"===e.type)),e.sort((e,t)=>t.date.localeCompare(e.date)||t.id-e.id)},[u,T,I]),z=e=>{M(e),$({category_id:"",description:"",amount:"",payment_method:"cash",date:new Date().toISOString().split("T")[0]}),D(!0)},G=e=>{switch(e){case"cash":return a.jsx(x.Z,{className:"w-4 h-4"});case"transfer":return a.jsx(m.Z,{className:"w-4 h-4"});case"card":return a.jsx(p.Z,{className:"w-4 h-4"});default:return a.jsx(h.Z,{className:"w-4 h-4"})}},B=e=>({cash:{en:"Cash",lo:"ເງິນສົດ"},transfer:{en:"Transfer",lo:"ໂອນ"},card:{en:"Card",lo:"ບັດ"}})[e]?.["lo"===Z?"lo":"en"]||e,F=e=>{let t=new Date,s=new Date;s.setDate(s.getDate()-e),q({start:s.toISOString().split("T")[0],end:t.toISOString().split("T")[0]})};return a.jsx(o.Z,{children:(0,a.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[a.jsx(d.mr,{title:"lo"===Z?"ລາຍຮັບ - ລາຍຈ່າຍ":"Income & Expenses",subtitle:"lo"===Z?"ບັນທຶກລາຍຮັບ ແລະ ລາຍຈ່າຍປະຈຳວັນ":"Track daily income and expenses",action:(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(d.zx,{variant:"success",icon:a.jsx(y,{className:"w-5 h-5"}),onClick:()=>z("income"),children:"lo"===Z?"ລາຍຮັບ":"Income"}),a.jsx(d.zx,{variant:"danger",icon:a.jsx(g,{className:"w-5 h-5"}),onClick:()=>z("expense"),children:"lo"===Z?"ລາຍຈ່າຍ":"Expense"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(d.Zb,{hover:!0,className:"p-5 border-l-4 border-l-emerald-500",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"lo"===Z?"ລາຍຮັບ":"Income"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-emerald-600 mt-1",children:["+",(0,c.xG)(A.totalIncome)]}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[(0,c.uf)(u.filter(e=>e.date>=T.start&&e.date<=T.end&&"income"===e.type).length)," ","lo"===Z?"ລາຍການ":"transactions"]})]}),a.jsx("div",{className:"w-12 h-12 rounded-xl bg-emerald-50 flex items-center justify-center",children:a.jsx(b.Z,{className:"w-6 h-6 text-emerald-600"})})]})}),a.jsx(d.Zb,{hover:!0,className:"p-5 border-l-4 border-l-red-500",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"lo"===Z?"ລາຍຈ່າຍ":"Expenses"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-red-600 mt-1",children:["-",(0,c.xG)(A.totalExpenses)]}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[(0,c.uf)(u.filter(e=>e.date>=T.start&&e.date<=T.end&&"expense"===e.type).length)," ","lo"===Z?"ລາຍການ":"transactions"]})]}),a.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-50 flex items-center justify-center",children:a.jsx(j.Z,{className:"w-6 h-6 text-red-600"})})]})}),a.jsx(d.Zb,{hover:!0,className:`p-5 border-l-4 ${A.netProfit>=0?"border-l-blue-500":"border-l-orange-500"}`,children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"lo"===Z?"ຍອດເຫຼືອ":"Balance"}),(0,a.jsxs)("p",{className:`text-2xl font-bold mt-1 ${A.netProfit>=0?"text-blue-600":"text-orange-600"}`,children:[A.netProfit>=0?"+":"",(0,c.xG)(A.netProfit)]}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[(0,c.uf)(A.transactionCount)," ","lo"===Z?"ລາຍການທັງໝົດ":"total transactions"]})]}),a.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${A.netProfit>=0?"bg-blue-50":"bg-orange-50"}`,children:a.jsx(h.Z,{className:`w-6 h-6 ${A.netProfit>=0?"text-blue-600":"text-orange-600"}`})})]})})]}),a.jsx(d.Zb,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[a.jsx(f.Z,{className:"w-5 h-5 text-gray-400"}),a.jsx("span",{className:"text-sm font-medium text-gray-600",children:"lo"===Z?"ຊ່ວງວັນທີ:":"Date Range:"}),a.jsx("input",{type:"date",value:T.start,onChange:e=>q({...T,start:e.target.value}),className:"px-3 py-2 border rounded-lg text-sm"}),a.jsx("span",{className:"text-gray-400",children:"→"}),a.jsx("input",{type:"date",value:T.end,onChange:e=>q({...T,end:e.target.value}),className:"px-3 py-2 border rounded-lg text-sm"}),(0,a.jsxs)("div",{className:"flex gap-2 ml-auto flex-wrap",children:[a.jsx("button",{onClick:()=>F(0),className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg",children:"lo"===Z?"ມື້ນີ້":"Today"}),a.jsx("button",{onClick:()=>F(7),className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg",children:"lo"===Z?"7 ວັນ":"7 Days"}),a.jsx("button",{onClick:()=>{let e=new Date;q({start:new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0],end:e.toISOString().split("T")[0]})},className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg",children:"lo"===Z?"ເດືອນນີ້":"This Month"}),a.jsx("button",{onClick:()=>{let e=new Date,t=new Date(e.getFullYear(),e.getMonth()-1,1),s=new Date(e.getFullYear(),e.getMonth(),0);q({start:t.toISOString().split("T")[0],end:s.toISOString().split("T")[0]})},className:"px-3 py-1.5 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg",children:"lo"===Z?"ເດືອນກ່ອນ":"Last Month"})]})]})}),a.jsx("div",{className:"flex gap-2",children:[{key:"all",label:"lo"===Z?"ທັງໝົດ":"All",count:E.length},{key:"income",label:"lo"===Z?"ລາຍຮັບ":"Income",count:u.filter(e=>e.date>=T.start&&e.date<=T.end&&"income"===e.type).length},{key:"expense",label:"lo"===Z?"ລາຍຈ່າຍ":"Expense",count:u.filter(e=>e.date>=T.start&&e.date<=T.end&&"expense"===e.type).length}].map(e=>(0,a.jsxs)("button",{onClick:()=>P(e.key),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${I===e.key?"bg-rose-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.label,a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${I===e.key?"bg-white/20":"bg-gray-200"}`,children:(0,c.uf)(e.count)})]},e.key))}),a.jsx(d.Zb,{padding:"none",children:0===E.length?a.jsx(d.ub,{icon:a.jsx(h.Z,{className:"w-8 h-8"}),title:"lo"===Z?"ບໍ່ມີລາຍການ":"No transactions",description:"lo"===Z?"ເລີ່ມບັນທຶກລາຍຮັບ-ຈ່າຍເລີຍ":"Start recording income/expense"}):a.jsx("div",{className:"divide-y",children:E.map(e=>(0,a.jsxs)("div",{className:`flex items-center gap-4 p-4 hover:bg-gray-50 transition-colors ${"income"===e.type?"border-l-4 border-l-emerald-400":"border-l-4 border-l-red-400"}`,children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${"income"===e.type?"bg-emerald-100":"bg-red-100"}`,children:"income"===e.type?a.jsx(b.Z,{className:"w-5 h-5 text-emerald-600"}):a.jsx(j.Z,{className:"w-5 h-5 text-red-600"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-gray-900 truncate",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[a.jsx("span",{children:e.date}),a.jsx(d.Ct,{variant:"income"===e.type?"success":"danger",size:"sm",children:e.category_name}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[G(e.payment_method)," ",B(e.payment_method)]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:`text-lg font-bold ${"income"===e.type?"text-emerald-600":"text-red-600"}`,children:["income"===e.type?"+":"-",(0,c.xG)(e.amount)]}),a.jsx("p",{className:"text-xs text-gray-400",children:e.created_by_name})]}),a.jsx("button",{onClick:()=>w(e.id),className:"p-2 hover:bg-red-50 rounded-lg",children:a.jsx(v.Z,{className:"w-4 h-4 text-red-500"})})]},e.id))})}),a.jsx(d.u_,{isOpen:C,onClose:()=>D(!1),title:"income"===S?"lo"===Z?"ເພີ່ມລາຍຮັບ":"Add Income":"lo"===Z?"ເພີ່ມລາຍຈ່າຍ":"Add Expense",size:"md",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let s=N.find(e=>e.id===Number(O.category_id));k({type:S,category_id:"expense"===S?Number(O.category_id):0,category_name:"income"===S?"lo"===Z?"ລາຍຮັບອື່ນ":"Other Income":s?.name||"Other",description:O.description,amount:Number(O.amount),payment_method:O.payment_method,date:O.date,created_by:t?.id||1,created_by_name:t?.full_name||"Admin"}),D(!1),$({category_id:"",description:"",amount:"",payment_method:"cash",date:new Date().toISOString().split("T")[0]})},className:"space-y-4",children:["expense"===S&&a.jsx(d.Ph,{label:"lo"===Z?"ໝວດໝູ່":"Category",value:O.category_id,onChange:e=>$({...O,category_id:e.target.value}),options:N.map(e=>({value:e.id,label:"lo"===Z?e.name_lo:e.name})),placeholder:`-- ${"lo"===Z?"ເລືອກໝວດໝູ່":"Select Category"} --`,required:!0}),a.jsx(d.II,{label:"lo"===Z?"ລາຍລະອຽດ":"Description",value:O.description,onChange:e=>$({...O,description:e.target.value}),required:!0,placeholder:"lo"===Z?"ລາຍລະອຽດ...":"Description..."}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(d.II,{label:"lo"===Z?"ຈຳນວນເງິນ":"Amount",type:"number",value:O.amount,onChange:e=>$({...O,amount:e.target.value}),required:!0,min:0}),a.jsx(d.II,{label:"lo"===Z?"ວັນທີ":"Date",type:"date",value:O.date,onChange:e=>$({...O,date:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"lo"===Z?"ວິທີຊຳລະ":"Payment Method"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"cash",label:"lo"===Z?"ເງິນສົດ":"Cash",icon:x.Z},{value:"transfer",label:"lo"===Z?"ໂອນ":"Transfer",icon:m.Z},{value:"card",label:"lo"===Z?"ບັດ":"Card",icon:p.Z}].map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>$({...O,payment_method:e.value}),className:`p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-1 ${O.payment_method===e.value?"border-rose-500 bg-rose-50":"border-gray-200 hover:border-gray-300"}`,children:[a.jsx(e.icon,{className:`w-5 h-5 ${O.payment_method===e.value?"text-rose-600":"text-gray-400"}`}),a.jsx("span",{className:`text-xs font-medium ${O.payment_method===e.value?"text-rose-700":"text-gray-600"}`,children:e.label})]},e.value))})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[a.jsx(d.zx,{type:"button",variant:"secondary",className:"flex-1",onClick:()=>D(!1),children:"lo"===Z?"ຍົກເລີກ":"Cancel"}),a.jsx(d.zx,{type:"submit",variant:"income"===S?"success":"danger",className:"flex-1",children:"lo"===Z?"ບັນທຶກ":"Save"})]})]})})]})})}},7273:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>l});let a=(0,s(6843).createProxy)(String.raw`D:\Download\beauty-center-demo\src\app\income-expense\page.tsx`),{__esModule:r,$$typeof:n}=a,l=a.default}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[198,635,639,104,688],()=>s(83));module.exports=a})();