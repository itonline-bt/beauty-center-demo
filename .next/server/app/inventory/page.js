(()=>{var e={};e.id=268,e.ids=[268],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4034:(e,t,l)=>{"use strict";l.r(t),l.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>d,pages:()=>u,routeModule:()=>x,tree:()=>c});var a=l(482),r=l(9108),s=l(2563),n=l.n(s),i=l(8300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);l.d(t,o);let c=["",{children:["inventory",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(l.bind(l,9503)),"D:\\Download\\beauty-center-demo\\src\\app\\inventory\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(l.bind(l,1403)),"D:\\Download\\beauty-center-demo\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(l.t.bind(l,9361,23)),"next/dist/client/components/not-found-error"]}],u=["D:\\Download\\beauty-center-demo\\src\\app\\inventory\\page.tsx"],d="/inventory/page",m={require:l,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/inventory/page",pathname:"/inventory",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3790:(e,t,l)=>{Promise.resolve().then(l.bind(l,5077))},4482:(e,t,l)=>{"use strict";l.d(t,{Z:()=>a});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,l(9224).Z)("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]])},1765:(e,t,l)=>{"use strict";l.d(t,{Z:()=>a});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,l(9224).Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},8411:(e,t,l)=>{"use strict";l.d(t,{Z:()=>a});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,l(9224).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},6075:(e,t,l)=>{"use strict";l.d(t,{Z:()=>a});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,l(9224).Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]])},1838:(e,t,l)=>{"use strict";l.d(t,{Z:()=>a});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,l(9224).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8271:(e,t,l)=>{"use strict";l.d(t,{Z:()=>a});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,l(9224).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},5077:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>_});var a=l(5344),r=l(3729),s=l(8428),n=l(2017),i=l(726),o=l(3538),c=l(9795),u=l(1453),d=l(1838),m=l(1917),x=l(5961),p=l(8411),g=l(4482),h=l(6075),y=l(8271);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let v=(0,l(9224).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var j=l(4513),b=l(1765);function _(){let e=(0,s.useRouter)(),{isAuthenticated:t}=(0,n.t)(),{inventory:l,inventoryCategories:_,addInventoryItem:f,updateInventoryItem:N,deleteInventoryItem:k,updateInventoryImage:q}=(0,n.a)(),{locale:w,t:S}=(0,i.useI18n)(),[C,P]=(0,r.useState)(""),[I,Z]=(0,r.useState)(""),[M,G]=(0,r.useState)(""),[L,D]=(0,r.useState)(!1),[z,R]=(0,r.useState)(null),[A,E]=(0,r.useState)(null),[$,B]=(0,r.useState)(!1),H=(0,r.useRef)(null),[U,V]=(0,r.useState)({name:"",name_lo:"",category_id:"",sku:"",quantity:"",min_quantity:"",cost_price:"",sell_price:"",unit:"piece",supplier:"",location:"",image_url:""});if((0,r.useEffect)(()=>{t||e.push("/login")},[t,e]),!t)return null;let F=(0,r.useMemo)(()=>l.filter(e=>{let t=e.name.toLowerCase().includes(C.toLowerCase())||e.sku&&e.sku.toLowerCase().includes(C.toLowerCase()),l=!I||e.category_id===Number(I),a=!M||"low"===M&&e.quantity<=e.min_quantity||"ok"===M&&e.quantity>e.min_quantity;return t&&l&&a}),[l,C,I,M]),J=(0,r.useMemo)(()=>{let e=l.filter(e=>e.quantity<=e.min_quantity),t=l.reduce((e,t)=>e+t.quantity*t.cost_price,0),a=l.reduce((e,t)=>e+t.quantity*t.sell_price,0);return{total:l.length,lowStock:e.length,totalValue:t,potentialProfit:a-t}},[l]),O=[{value:"piece",label:"lo"===w?"ອັນ":"Piece"},{value:"bottle",label:"lo"===w?"ຂວດ":"Bottle"},{value:"box",label:"lo"===w?"ກ່ອງ":"Box"},{value:"pack",label:"lo"===w?"ແພັກ":"Pack"},{value:"set",label:"lo"===w?"ຊຸດ":"Set"},{value:"jar",label:"lo"===w?"ກະປ໋ອງ":"Jar"}],T=()=>{E(null),V(e=>({...e,image_url:""})),H.current&&(H.current.value="")},K=e=>{e?(R(e),E(e.image_url||null),V({name:e.name,name_lo:e.name_lo||"",category_id:String(e.category_id||""),sku:e.sku||"",quantity:String(e.quantity),min_quantity:String(e.min_quantity),cost_price:String(e.cost_price),sell_price:String(e.sell_price),unit:e.unit||"piece",supplier:e.supplier||"",location:e.location||"",image_url:e.image_url||""})):(R(null),E(null),V({name:"",name_lo:"",category_id:"",sku:"",quantity:"0",min_quantity:"5",cost_price:"",sell_price:"",unit:"piece",supplier:"",location:"",image_url:""})),D(!0)},Q=()=>{D(!1),R(null),E(null),H.current&&(H.current.value="")},W=e=>0===e.quantity?{label:"lo"===w?"ໝົດສະຕັອກ":"Out of Stock",color:"bg-red-100 text-red-700"}:e.quantity<=e.min_quantity?{label:"lo"===w?"ໃກ້ໝົດ":"Low Stock",color:"bg-amber-100 text-amber-700"}:{label:"lo"===w?"ພຽງພໍ":"In Stock",color:"bg-emerald-100 text-emerald-700"},X=e=>e.image_url&&e.image_url.startsWith("data:")||e.image_url?e.image_url:(0,u.G)(e.name,e.category);return a.jsx(o.Z,{children:(0,a.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[a.jsx(c.mr,{title:S("inventory.title"),subtitle:"lo"===w?"ຈັດການສິນຄ້າຄົງຄັງ":"Manage inventory items",action:(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(c.zx,{variant:"secondary",onClick:()=>e.push("/stock"),children:"lo"===w?"ຕັດສະຕັອກ":"Adjust Stock"}),a.jsx(c.zx,{icon:a.jsx(d.Z,{className:"w-5 h-5"}),onClick:()=>K(),children:S("inventory.add")})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(c.Rm,{title:"lo"===w?"ສິນຄ້າທັງໝົດ":"Total Items",value:(0,u.uf)(J.total),icon:a.jsx(m.Z,{className:"w-6 h-6"}),color:"blue"}),a.jsx(c.Rm,{title:"lo"===w?"ສິນຄ້າໃກ້ໝົດ":"Low Stock",value:(0,u.uf)(J.lowStock),icon:a.jsx(x.Z,{className:"w-6 h-6"}),color:J.lowStock>0?"amber":"emerald"}),a.jsx(c.Rm,{title:"lo"===w?"ມູນຄ່າສະຕັອກ":"Stock Value",value:(0,u.xG)(J.totalValue),icon:a.jsx(p.Z,{className:"w-6 h-6"}),color:"purple"}),a.jsx(c.Rm,{title:"lo"===w?"ກຳໄລທີ່ຄາດ":"Potential Profit",value:(0,u.xG)(J.potentialProfit),icon:a.jsx(g.Z,{className:"w-6 h-6"}),color:"emerald"})]}),J.lowStock>0&&a.jsx(c.bZ,{variant:"warning",title:"lo"===w?"ສິນຄ້າໃກ້ໝົດ!":"Low Stock Alert!",children:"lo"===w?`ມີ ${J.lowStock} ລາຍການທີ່ຕ້ອງສັ່ງເພີ່ມ`:`${J.lowStock} items need restocking`}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx(c.Mj,{value:C,onChange:P,placeholder:S("common.search")})}),(0,a.jsxs)("select",{value:I,onChange:e=>Z(e.target.value),className:"px-4 py-2.5 border rounded-lg bg-white",children:[(0,a.jsxs)("option",{value:"",children:[S("common.all")," ","lo"===w?"ໝວດໝູ່":"Categories"]}),_.map(e=>a.jsx("option",{value:e.id,children:"lo"===w?e.name_lo:e.name},e.id))]}),(0,a.jsxs)("select",{value:M,onChange:e=>G(e.target.value),className:"px-4 py-2.5 border rounded-lg bg-white",children:[(0,a.jsxs)("option",{value:"",children:[S("common.all")," ","lo"===w?"ສະຖານະ":"Status"]}),a.jsx("option",{value:"low",children:"lo"===w?"ໃກ້ໝົດ":"Low Stock"}),a.jsx("option",{value:"ok",children:"lo"===w?"ພຽງພໍ":"In Stock"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:0===F.length?a.jsx("div",{className:"col-span-full",children:a.jsx(c.Zb,{className:"py-12 text-center text-gray-500",children:"lo"===w?"ບໍ່ພົບຂໍ້ມູນ":"No items found"})}):F.map(e=>{let t=W(e);return(0,a.jsxs)(c.Zb,{hover:!0,className:"p-0 overflow-hidden",children:[(0,a.jsxs)("div",{className:"relative aspect-square bg-gray-100",children:[a.jsx("img",{src:X(e),alt:e.name,className:"w-full h-full object-cover",onError:t=>{t.target.src=(0,u.G)(e.name,e.category)}}),a.jsx("span",{className:`absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-medium ${t.color}`,children:t.label})]}),(0,a.jsxs)("div",{className:"p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:"lo"===w?e.name_lo:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 font-mono",children:["SKU: ",e.sku]}),a.jsx("div",{className:"flex items-center gap-2 mt-2",children:a.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 rounded-full text-gray-600",children:e.category})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-3 border-t",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-lg font-bold text-rose-600",children:(0,u.xG)(e.sell_price)}),(0,a.jsxs)("p",{className:`text-sm ${e.quantity<=e.min_quantity?"text-red-600 font-medium":"text-gray-500"}`,children:[(0,u.uf)(e.quantity)," ",O.find(t=>t.value===e.unit)?.label||e.unit]})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>K(e),className:"p-2 rounded-lg hover:bg-gray-100",children:a.jsx(h.Z,{className:"w-4 h-4 text-gray-500"})}),a.jsx("button",{onClick:()=>k(e.id),className:"p-2 rounded-lg hover:bg-red-50",children:a.jsx(y.Z,{className:"w-4 h-4 text-red-500"})})]})]})]})]},e.id)})}),a.jsx(c.u_,{isOpen:L,onClose:Q,title:S(z?"common.edit":"inventory.add"),size:"lg",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=_.find(e=>e.id===Number(U.category_id)),l={name:U.name,name_lo:U.name_lo,category_id:Number(U.category_id),category:t?.name||"",sku:U.sku,quantity:Number(U.quantity),min_quantity:Number(U.min_quantity),cost_price:Number(U.cost_price),sell_price:Number(U.sell_price),unit:U.unit,supplier:U.supplier,location:U.location,image_url:U.image_url||null};z?N(z.id,l):f(l),Q()},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"lo"===w?"ຮູບພາບສິນຄ້າ":"Product Image"}),(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"relative w-32 h-32 rounded-xl bg-gray-100 flex items-center justify-center overflow-hidden border-2 border-dashed border-gray-300 hover:border-rose-400 transition-colors cursor-pointer",onClick:()=>H.current?.click(),children:$?a.jsx("div",{className:"animate-pulse text-gray-400",children:a.jsx(v,{className:"w-8 h-8 animate-bounce"})}):A?(0,a.jsxs)(a.Fragment,{children:[a.jsx("img",{src:A,alt:"Preview",className:"w-full h-full object-cover"}),a.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),T()},className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:a.jsx(j.Z,{className:"w-4 h-4"})})]}):(0,a.jsxs)("div",{className:"text-center p-2",children:[a.jsx(b.Z,{className:"w-8 h-8 text-gray-400 mx-auto"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"lo"===w?"ຄລິກເພື່ອອັບໂຫຼດ":"Click to upload"})]})}),a.jsx("input",{ref:H,type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(!t)return;if(!t.type.startsWith("image/")){alert("lo"===w?"ກະລຸນາເລືອກໄຟລ໌ຮູບພາບ":"Please select an image file");return}if(t.size>2097152){alert("lo"===w?"ຮູບພາບຕ້ອງມີຂະໜາດບໍ່ເກີນ 2MB":"Image must be less than 2MB");return}B(!0);let l=new FileReader;l.onload=e=>{let t=e.target?.result;E(t),V(e=>({...e,image_url:t})),B(!1)},l.onerror=()=>{alert("lo"===w?"ເກີດຂໍ້ຜິດພາດ":"Error reading file"),B(!1)},l.readAsDataURL(t)},className:"hidden"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"lo"===w?"ອັບໂຫຼດຮູບສິນຄ້າ (PNG, JPG, GIF)":"Upload product image (PNG, JPG, GIF)"}),a.jsx("p",{className:"text-xs text-gray-400",children:"lo"===w?"ຂະໜາດສູງສຸດ 2MB":"Max size 2MB"}),!A&&a.jsx(c.zx,{type:"button",variant:"secondary",size:"sm",className:"mt-2",icon:a.jsx(v,{className:"w-4 h-4"}),onClick:()=>H.current?.click(),children:"lo"===w?"ເລືອກຮູບ":"Choose Image"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(c.II,{label:`${S("inventory.name")} (EN)`,value:U.name,onChange:e=>V({...U,name:e.target.value}),required:!0}),a.jsx(c.II,{label:`${S("inventory.name")} (ລາວ)`,value:U.name_lo,onChange:e=>V({...U,name_lo:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(c.Ph,{label:"lo"===w?"ໝວດໝູ່":"Category",value:U.category_id,onChange:e=>V({...U,category_id:e.target.value}),options:_.map(e=>({value:e.id,label:"lo"===w?e.name_lo:e.name})),placeholder:"--",required:!0}),a.jsx(c.II,{label:"SKU",value:U.sku,onChange:e=>V({...U,sku:e.target.value}),placeholder:"HAIR-001",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[a.jsx(c.II,{label:"lo"===w?"ຈຳນວນ":"Quantity",type:"number",value:U.quantity,onChange:e=>V({...U,quantity:e.target.value}),required:!0}),a.jsx(c.Ph,{label:"lo"===w?"ຫົວໜ່ວຍ":"Unit",value:U.unit,onChange:e=>V({...U,unit:e.target.value}),options:O}),a.jsx(c.II,{label:"lo"===w?"ຈຳນວນຕ່ຳສຸດ":"Min Qty",type:"number",value:U.min_quantity,onChange:e=>V({...U,min_quantity:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(c.II,{label:"lo"===w?"ລາຄາຕົ້ນທຶນ":"Cost Price",type:"number",value:U.cost_price,onChange:e=>V({...U,cost_price:e.target.value}),required:!0}),a.jsx(c.II,{label:"lo"===w?"ລາຄາຂາຍ":"Sell Price",type:"number",value:U.sell_price,onChange:e=>V({...U,sell_price:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(c.II,{label:"lo"===w?"ຜູ້ສະໜອງ":"Supplier",value:U.supplier,onChange:e=>V({...U,supplier:e.target.value}),placeholder:"lo"===w?"ຊື່ຜູ້ສະໜອງ...":"Supplier name..."}),a.jsx(c.II,{label:"lo"===w?"ສະຖານທີ່ເກັບ":"Location",value:U.location,onChange:e=>V({...U,location:e.target.value}),placeholder:"lo"===w?"ຕຳແໜ່ງເກັບ...":"Storage location..."})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[a.jsx(c.zx,{type:"button",variant:"secondary",className:"flex-1",onClick:Q,children:S("common.cancel")}),a.jsx(c.zx,{type:"submit",className:"flex-1",children:S("common.save")})]})]})})]})})}},9503:(e,t,l)=>{"use strict";l.r(t),l.d(t,{$$typeof:()=>s,__esModule:()=>r,default:()=>n});let a=(0,l(6843).createProxy)(String.raw`D:\Download\beauty-center-demo\src\app\inventory\page.tsx`),{__esModule:r,$$typeof:s}=a,n=a.default}};var t=require("../../webpack-runtime.js");t.C(e);var l=e=>t(t.s=e),a=t.X(0,[198,635,639,104,688],()=>l(4034));module.exports=a})();