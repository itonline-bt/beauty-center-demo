(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[469],{4812:function(e,a,l){Promise.resolve().then(l.bind(l,2334))},6490:function(e,a,l){"use strict";l.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,l(7461).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8219:function(e,a,l){"use strict";l.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,l(7461).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},5421:function(e,a,l){"use strict";l.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,l(7461).Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]])},94:function(e,a,l){"use strict";l.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,l(7461).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},489:function(e,a,l){"use strict";l.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,l(7461).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9733:function(e,a,l){"use strict";l.d(a,{Z:function(){return s}});/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,l(7461).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},2334:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return b}});var s=l(3827),t=l(4090),r=l(7907),n=l(3036),i=l(9003),c=l(1965),o=l(5030),d=l(2169),u=l(94),m=l(5495),h=l(7461);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,h.Z)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);var g=l(8219),p=l(9733);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let v=(0,h.Z)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);var y=l(5421),f=l(489),j=l(6490);function b(){let e=(0,r.useRouter)(),{isAuthenticated:a}=(0,n.t)(),{services:l,serviceCategories:h,appointments:b,addService:N,updateService:k,deleteService:_}=(0,n.a)(),{locale:Z,t:w}=(0,i.useI18n)(),[C,M]=(0,t.useState)(""),[S,I]=(0,t.useState)(""),[q,P]=(0,t.useState)(!1),[E,z]=(0,t.useState)(null),[R,T]=(0,t.useState)({name:"",name_lo:"",category_id:"",price:"",duration:"",description:""});if((0,t.useEffect)(()=>{a||e.push("/login")},[a,e]),!a)return null;let H=(0,t.useMemo)(()=>l.filter(e=>{let a=e.name.toLowerCase().includes(C.toLowerCase())||e.name_lo.includes(C),l=!S||e.category_id===Number(S);return a&&l}),[l,C,S]),L=(0,t.useMemo)(()=>{let e=b.filter(e=>"completed"===e.status),a=l.map(a=>({...a,bookings:e.filter(e=>e.service_id===a.id).length,revenue:e.filter(e=>e.service_id===a.id).reduce((e,a)=>e+a.total_price,0)})).sort((e,a)=>a.revenue-e.revenue);return{total:l.length,categories:h.length,avgPrice:l.length>0?Math.round(l.reduce((e,a)=>e+a.price,0)/l.length):0,topService:a[0]}},[l,h,b]),G=e=>{e?(z(e),T({name:e.name,name_lo:e.name_lo,category_id:String(e.category_id),price:String(e.price),duration:String(e.duration),description:""})):(z(null),T({name:"",name_lo:"",category_id:"",price:"",duration:"60",description:""})),P(!0)},O=()=>{P(!1),z(null)},D={1:"from-rose-400 to-pink-500",2:"from-blue-400 to-indigo-500",3:"from-purple-400 to-violet-500",4:"from-emerald-400 to-teal-500",5:"from-amber-400 to-orange-500",6:"from-cyan-400 to-sky-500"};return(0,s.jsx)(c.Z,{children:(0,s.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,s.jsx)(o.mr,{title:w("services.title"),subtitle:"lo"===Z?"ຈັດການບໍລິການຂອງຮ້ານ":"Manage your salon services",action:(0,s.jsx)(o.zx,{icon:(0,s.jsx)(u.Z,{className:"w-5 h-5"}),onClick:()=>G(),children:w("services.add")})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsx)(o.Rm,{title:"lo"===Z?"ບໍລິການທັງໝົດ":"Total Services",value:L.total,icon:(0,s.jsx)(m.Z,{className:"w-6 h-6"}),color:"rose"}),(0,s.jsx)(o.Rm,{title:"lo"===Z?"ໝວດໝູ່":"Categories",value:L.categories,icon:(0,s.jsx)(x,{className:"w-6 h-6"}),color:"blue"}),(0,s.jsx)(o.Rm,{title:"lo"===Z?"ລາຄາສະເລ່ຍ":"Average Price",value:(0,d.xG)(L.avgPrice),icon:(0,s.jsx)(g.Z,{className:"w-6 h-6"}),color:"emerald"}),(0,s.jsx)(o.Rm,{title:"lo"===Z?"ບໍລິການຍອດນິຍົມ":"Top Service",value:L.topService?("lo"===Z?L.topService.name_lo:L.topService.name).substring(0,15):"-",icon:(0,s.jsx)(p.Z,{className:"w-6 h-6"}),color:"amber"})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(o.Mj,{value:C,onChange:M,placeholder:w("common.search")})}),(0,s.jsxs)("select",{value:S,onChange:e=>I(e.target.value),className:"px-4 py-2.5 border rounded-lg bg-white",children:[(0,s.jsxs)("option",{value:"",children:[w("common.all")," ","lo"===Z?"ໝວດໝູ່":"Categories"]}),h.map(e=>(0,s.jsx)("option",{value:e.id,children:"lo"===Z?e.name_lo:e.name},e.id))]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:0===H.length?(0,s.jsx)("div",{className:"col-span-full",children:(0,s.jsx)(o.Zb,{children:(0,s.jsx)(o.ub,{icon:(0,s.jsx)(m.Z,{className:"w-8 h-8"}),title:"lo"===Z?"ບໍ່ພົບບໍລິການ":"No services found",action:(0,s.jsx)(o.zx,{onClick:()=>G(),children:w("services.add")})})})}):H.map(e=>(0,s.jsxs)(o.Zb,{hover:!0,className:"overflow-hidden p-0",children:[(0,s.jsx)("div",{className:"h-2 bg-gradient-to-r ".concat(D[e.category_id]||"from-gray-400 to-gray-500")}),(0,s.jsxs)("div",{className:"p-5",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:"lo"===Z?e.name_lo:e.name}),(0,s.jsxs)(o.Ct,{variant:"default",size:"sm",children:[(0,s.jsx)(v,{className:"w-3 h-3 mr-1"}),e.category]})]}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("button",{onClick:()=>G(e),className:"p-1.5 hover:bg-gray-100 rounded-lg",children:(0,s.jsx)(y.Z,{className:"w-4 h-4 text-gray-500"})}),(0,s.jsx)("button",{onClick:()=>_(e.id),className:"p-1.5 hover:bg-red-50 rounded-lg",children:(0,s.jsx)(f.Z,{className:"w-4 h-4 text-red-500"})})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 text-gray-500",children:[(0,s.jsx)(j.Z,{className:"w-4 h-4"}),(0,s.jsxs)("span",{className:"text-sm",children:[e.duration," ","lo"===Z?"ນາທີ":"min"]})]}),(0,s.jsx)("span",{className:"text-xl font-bold text-rose-600",children:(0,d.xG)(e.price)})]})]})]},e.id))}),(0,s.jsx)(o.u_,{isOpen:q,onClose:O,title:w(E?"common.edit":"services.add"),children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault();let a=h.find(e=>e.id===Number(R.category_id)),l={name:R.name,name_lo:R.name_lo,category_id:Number(R.category_id),category_name:(null==a?void 0:a.name)||"",price:Number(R.price),duration:Number(R.duration)};E?k(E.id,l):N(l),O()},className:"space-y-4",children:[(0,s.jsx)(o.II,{label:"".concat(w("services.name")," (English)"),value:R.name,onChange:e=>T({...R,name:e.target.value}),placeholder:"Service name in English",required:!0}),(0,s.jsx)(o.II,{label:"".concat(w("services.name")," (ລາວ)"),value:R.name_lo,onChange:e=>T({...R,name_lo:e.target.value}),placeholder:"ຊື່ບໍລິການເປັນພາສາລາວ",required:!0}),(0,s.jsx)(o.Ph,{label:w("services.category"),value:R.category_id,onChange:e=>T({...R,category_id:e.target.value}),options:h.map(e=>({value:e.id,label:"lo"===Z?e.name_lo:e.name})),placeholder:"-- ".concat("lo"===Z?"ເລືອກໝວດໝູ່":"Select Category"," --"),required:!0}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(o.II,{label:w("services.price"),type:"number",value:R.price,onChange:e=>T({...R,price:e.target.value}),placeholder:"0",required:!0}),(0,s.jsx)(o.II,{label:"".concat(w("services.duration")," (").concat("lo"===Z?"ນາທີ":"minutes",")"),type:"number",value:R.duration,onChange:e=>T({...R,duration:e.target.value}),placeholder:"60",required:!0})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsx)(o.zx,{type:"button",variant:"secondary",className:"flex-1",onClick:O,children:w("common.cancel")}),(0,s.jsx)(o.zx,{type:"submit",className:"flex-1",children:w("common.save")})]})]})})]})})}}},function(e){e.O(0,[549,576,36,619,971,69,744],function(){return e(e.s=4812)}),_N_E=e.O()}]);